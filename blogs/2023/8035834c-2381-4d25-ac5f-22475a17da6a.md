---
title: LogicFlowæ›´å¤šé…ç½®é€‰é¡¹
date: '2023-01-02 21:06'
sidebar: 'auto'
categories:
 - LogicFlow
tags:
 - LogicFlow
---

:::tip
LogicFlow æ˜¯ä¸€æ¬¾æµç¨‹å›¾ç¼–è¾‘æ¡†æ¶ï¼Œæä¾›äº†ä¸€ç³»åˆ—æµç¨‹å›¾äº¤äº’ã€ç¼–è¾‘æ‰€å¿…éœ€çš„åŠŸèƒ½å’Œçµæ´»çš„èŠ‚ç‚¹è‡ªå®šä¹‰ã€æ’ä»¶ç­‰æ‹“å±•æœºåˆ¶ã€‚LogicFlowæ”¯æŒå‰ç«¯ç ”å‘è‡ªå®šä¹‰å¼€å‘å„ç§é€»è¾‘ç¼–æ’åœºæ™¯ï¼Œå¦‚æµç¨‹å›¾ã€ERå›¾ã€BPMNæµç¨‹ç­‰ã€‚åœ¨å·¥ä½œå®¡æ‰¹é…ç½®ã€æœºå™¨äººé€»è¾‘ç¼–æ’ã€æ— ä»£ç å¹³å°æµç¨‹é…ç½®éƒ½æœ‰è¾ƒå¥½çš„åº”ç”¨ã€‚
:::

<!-- more -->

> ğŸ„Hi~ å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°é‘«åŒå­¦ï¼Œä¸€ä½é•¿æœŸä»äº‹å‰ç«¯å¼€å‘çš„ç¼–ç¨‹çˆ±å¥½è€…ï¼Œæˆ‘å°†ä½¿ç”¨æ›´ä¸ºå®ç”¨çš„æ¡ˆä¾‹è¾“å‡ºæ›´å¤šçš„ç¼–ç¨‹çŸ¥è¯†ï¼ŒåŒæ—¶æˆ‘ä¿¡å¥‰åˆ†äº«æ˜¯æˆé•¿çš„å”¯ä¸€æ·å¾„ï¼Œåœ¨è¿™é‡Œä¹Ÿå¸Œæœ›æˆ‘çš„æ¯ä¸€ç¯‡æ–‡ç« éƒ½èƒ½æˆä¸ºä½ æŠ€æœ¯è½åœ°çš„å‚è€ƒ~

@[TOC](ç›®å½•)
# 1. å‡†å¤‡å·¥ä½œï¼š
## 1. åˆå§‹åŒ–é¡¹ç›®ï¼š
### 1.1 åˆå§‹åŒ–ç¯å¢ƒï¼š
> ä½¿ç”¨`pnpm create vite`åˆ›å»ºé¡¹ç›®ï¼Œé€‰æ‹©`Vue`æ¡†æ¶åŠ`TypeScript`å˜ä½“ï¼›

### 1.2 å®‰è£…æ ¸å¿ƒæ¨¡å—ï¼š
> å®‰è£…æ ¸å¿ƒæ¨¡å—ï¼š`pnpm add @logicflow/core`ï¼›

## 2. åˆå§‹åŒ–å®¹å™¨åŠLogicFlowå¯¹è±¡ï¼š
### 2.1 å‡†å¤‡å®¹å™¨ï¼š
> å‡†å¤‡ä¸€ä¸ª`container`å®¹å™¨ï¼Œå¹¶é€šè¿‡**css**åˆå§‹åŒ–å®¹å™¨çš„å°ºå¯¸ï¼›

```typescript
<template>
  <div ref="container" class="container"></div>
</template>

<style scoped>
.container {
  width: 500px;
  height: 400px;
}
</style>

```
### 2.2 å¯¼å…¥æ¨¡å—ï¼š
> å¯¼å…¥`LogicFlow`å’Œå¯¹åº”çš„æ ·å¼ä¾èµ–æ¨¡å—ï¼›

```typescript
<script setup lang="ts">
import LogicFlow from "@logicflow/core";
import "@logicflow/core/dist/style/index.css";
</script>
```
### 2.3 å®ä¾‹åŒ–&æ¸²æŸ“ï¼š
> åœ¨`onMounted`åå¯¹`LogicFlow`å¯¹è±¡å®ä¾‹åŒ–å¹¶è¿›è¡Œæ¸²æŸ“ï¼Œä¸ºäº†èƒ½çœ‹åˆ°åˆå§‹å®¹å™¨å»ºè®®å¼€å¯`grid`é€‰é¡¹ï¼›

```typescript
<script setup lang="ts">
import { onMounted, ref } from "vue";

const container = ref();
const lf = ref<LogicFlow>();

onMounted(() => {
  lf.value = new LogicFlow({
    container: container.value,
    grid: true,
  })
  lf.value.render();
})
</script>
```
### 2.4 é¢„è§ˆæ•ˆæœï¼š
> å¯åŠ¨é¡¹ç›®ååœ¨æµè§ˆå™¨è®¿é—®å³å¯çœ‹åˆ°è¿™ä¸ª`500*400`çš„ç‚¹é˜µå›¾ï¼Œè¿™ä¸ªå°±æ˜¯åé¢ç»˜åˆ¶èŠ‚ç‚¹çš„åŒºåŸŸï¼›

![image.png](https://img-blog.csdnimg.cn/img_convert/ce9dafc549904431318325eedc8523ff.png)
# 2. è®¾ç½®ä¸»é¢˜ Themeï¼š
> è®¾ç½®ä¸»é¢˜æä¾›äº†ä¸¤ç§æ–¹å¼çš„å®ç°ï¼Œåˆ†åˆ«æ˜¯åœ¨å®ä¾‹åŒ–LFå¯¹è±¡æ—¶é€šè¿‡`style`é€‰é¡¹è¿›è¡Œé…ç½®ï¼Œå¦ä¸€ç§æ–¹å¼æ˜¯åœ¨å®ä¾‹åŒ–LFå¯¹è±¡åä½¿ç”¨å†…ç½®çš„`lf.setTheme({})`å‡½æ•°è¿›è¡Œé…ç½®ï¼›

è®¾ç½®ä¸»é¢˜çš„å¸¸ç”¨å±æ€§åˆ—è¡¨ï¼ˆå®Œæ•´çš„é€‰**é¡¹åˆ—**è¡¨å‚è§[ThemeApi](http://logic-flow.org/api/themeApi.html)ï¼‰ï¼š

| **å±æ€§å** | **è¯´æ˜** |
| --- | --- |
| **stroke** | å±æ€§å®šä¹‰äº†ç»™å®šå›¾å½¢å…ƒç´ çš„å¤–è½®å»“çš„é¢œè‰² |
| **stroke-dasharray** | å±æ€§å¯æ§åˆ¶ç”¨æ¥æè¾¹çš„ç‚¹åˆ’çº¿çš„å›¾æ¡ˆèŒƒå¼ |
| **stroke-width** | å±æ€§æŒ‡å®šäº†å½“å‰å¯¹è±¡çš„è½®å»“çš„å®½åº¦ |
| **fill** | å±æ€§ç”¨æ¥å®šä¹‰ç»™å®šå›¾å½¢å…ƒç´ å†…éƒ¨çš„é¢œè‰² |
| **fill-opacity** | å±æ€§æŒ‡å®šäº†å¡«è‰²çš„ä¸é€æ˜åº¦æˆ–å½“å‰å¯¹è±¡çš„å†…å®¹ç‰©çš„ä¸é€æ˜åº¦ |
| **font-size** | å±æ€§å®šä¹‰æ–‡æœ¬å­—ä½“å¤§å° |
| **color** | å±æ€§å®šä¹‰æ–‡æœ¬é¢œè‰² |

1. å®ä¾‹åŒ–LFæ—¶é…ç½®ï¼š
```typescript
<script setup lang="ts">

  const styleConfig = {
    baseNode: {
      fill: "rgb(255, 230, 204)",
      stroke: "green",
      strokeDasharray: "3,3"
    },
    rect: {
      fill: "#FFFFFF",
      strokeDasharray: "10, 1",
      className: "custom-cls",
      radius: 30
    },
    circle: {
      r: 10,
      fill: "#9a9b9c"
    },
    nodeText: {
      fontSize: 20,
      color: "red",
      overflowMode: "autoWrap"
    },
    baseEdge: {
      strokeWidth: 1,
      strokeDasharray: "3,3"
    },
    polyline: {
      offset: 20,
      strokeDasharray: "none",
      strokeWidth: 4
    },
  }

onMounted(() => {
  lf.value = new LogicFlow({
    container: container.value,
    grid: true,
    // å®ä¾‹åŒ–LFæ—¶é…ç½®ä¸»é¢˜
    style: styleConfig,
  })

  lf.value.render(graphData);
})
  </script>
```

2. å®ä¾‹åŒ–LFåé…ç½®ï¼š
```typescript
<script setup lang="ts">

const styleConfig = {
  baseNode: {
    fill: "rgb(255, 230, 204)",
    stroke: "green",
    strokeDasharray: "3,3"
  },
  rect: {
    fill: "#FFFFFF",
    strokeDasharray: "10, 1",
    className: "custom-cls",
    radius: 30
  },
  circle: {
    r: 10,
    fill: "#9a9b9c"
  },
  nodeText: {
    fontSize: 20,
    color: "red",
    overflowMode: "autoWrap"
  },
  baseEdge: {
    strokeWidth: 1,
    strokeDasharray: "3,3"
  },
  polyline: {
    offset: 20,
    strokeDasharray: "none",
    strokeWidth: 4
  },
}

onMounted(() => {
  lf.value = new LogicFlow({
    container: container.value,
    grid: true,
  })

  // å®ä¾‹åŒ–LFåé…ç½®ä¸»é¢˜
  lf.value.setTheme(styleConfig);

  lf.value.render(graphData);
})
</script>
```
**tip**ï¼šèŠ‚ç‚¹çš„`width`ã€`height`ã€`r`ç­‰ç±»ä¼¼å±æ€§ç»Ÿä¸€å½’ç±»ä¸ºå½¢çŠ¶å±æ€§ï¼Œå› å…¶ä¼šå¯¹é”šç‚¹ä½ç½®ã€è¿çº¿è®¡ç®—äº§ç”Ÿå½±å“ï¼Œé¡¾ä¸èƒ½é€šè¿‡ä¸»é¢˜è¿›è¡Œè®¾ç½®ï¼Œä»…æ”¯æŒåœ¨è‡ªå®šä¹‰æ—¶è°ƒæ•´ã€‚
# 3. è®¾ç½®ç½‘æ ¼ Girdï¼š
> ç½‘æ ¼åœ¨LFä¸­ä¸»è¦èµ·åˆ°çš„ä½œç”¨æ˜¯å¯¹èŠ‚ç‚¹çš„ä¸­å¿ƒç‚¹å’Œç§»åŠ¨æ—¶çš„å®šä½ï¼Œé»˜è®¤ç½‘æ ¼é€‰é¡¹å…³é—­ï¼Œä¸­å¿ƒç‚¹å’Œç§»åŠ¨çš„æœ€å°å•ä½ä¸º1pxï¼Œå½“å¼€å¯ç½‘æ ¼é€‰é¡¹åï¼Œæ¸²æŸ“çš„ä¸­å¿ƒç‚¹å’Œç§»åŠ¨æ—¶çš„æœ€å°å•ä½å°†è°ƒæ•´ä¸º20pxã€‚åœ¨è‡ªå®šä¹‰èŠ‚ç‚¹çš„å®½é«˜æ—¶ä¸ºäº†æ›´å¥½çš„ä¸ç½‘æ ¼å¯¹é½ï¼Œå»ºè®®è®¾ç½®ä¸ºç½‘æ ¼æœ€å°å•ä½çš„æ•´æ•°å€ã€‚

```typescript
<script setup lang="ts">

const gridConfig = {
  size: 20,
  visible: true,
  type: 'mesh',
  config: {
    color: '#ababab',
    thickness: 1,
  },
}

onMounted(() => {
  lf.value = new LogicFlow({
    container: container.value,
    grid: gridConfig,
  })

  lf.value.render(graphData);
})
</script>
```
# 4. è®¾ç½®å¯¹é½çº¿ Snaplineï¼š
> ç½‘æ ¼è§£å†³äº†ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸­å¿ƒç‚¹å’Œç§»åŠ¨æ—¶çš„å®šä½å¯¹é½é—®é¢˜ï¼Œé‚£ä¹ˆå¤šä¸ªèŠ‚ç‚¹çš„ä½ç½®è°ƒæ•´å°±éœ€è¦ç”¨åˆ°å¯¹é½çº¿è¾…åŠ©è¿›è¡Œäº†ï¼Œè¯¥`snapline`é€‰é¡¹é»˜è®¤å¼€å¯ï¼Œå¯¹é½çº¿çš„æ ·å¼å¯ä»¥é€šè¿‡è®¾ç½®ä¸»é¢˜ä¸­çš„é€‰é¡¹æ¥è‡ªå®šä¹‰ï¼›

```typescript
<script setup lang="ts">

const styleConfig = {
  snapline: {
    stroke: '#1E90FF', // å¯¹é½çº¿é¢œè‰²
    strokeWidth: 1, // å¯¹é½çº¿å®½åº¦
  },
}

onMounted(() => {
  lf.value = new LogicFlow({
    container: container.value,
  })

  lf.value.setTheme(styleConfig);

  lf.value.render(graphData);
})
</script>
```
# 5. è®¾ç½®èƒŒæ™¯ Backgroundï¼š
> åœ¨å‰é¢çš„ç¤ºä¾‹ä¸­ä¸€ç›´æ˜¯å¯ç”¨äº†Girdæ¥å……å½“ç€èƒŒæ™¯çš„è§’è‰²ï¼ŒLFå¯¹è±¡åœ¨å®ä¾‹åŒ–çš„æ—¶å€™åŒæ ·å¯ä»¥é€šè¿‡é€‰é¡¹æ¥æ§åˆ¶èƒŒæ™¯ï¼Œé»˜è®¤æ˜¯å…³é—­çš„çŠ¶æ€ï¼Œä¿®æ”¹çš„é€‰é¡¹æ˜¯`background`ï¼›

```typescript
<script setup lang="ts">

onMounted(() => {
  lf.value = new LogicFlow({
    container: container.value,
    // grid: true, // å…³é—­ç½‘æ ¼
    background: {
      backgroundImage: "url(../grid.svg)",
      backgroundRepeat: "repeat"
    }
  })

  lf.value.render(graphData);
})
</script>
```
```typescript
// grid.svg
<?xml version="1.0" encoding="UTF-8"?>
<svg width="53px" height="54px" viewBox="0 0 53 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>èƒŒæ™¯ç½‘æ ¼</title>
    <desc>Created with Sketch.</desc>
    <defs></defs>
    <g id="èƒŒæ™¯ç½‘æ ¼" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <rect id="Rectangle-1" fill="#F5F5F5" x="0" y="10" width="53" height="1"></rect>
        <rect id="Rectangle-2" fill="#F5F5F5" x="10" y="0" width="1" height="54"></rect>
        <rect id="Rectangle-3" fill="#F5F5F5" x="21" y="0" width="1" height="54"></rect>
        <rect id="Rectangle-4" fill="#F5F5F5" x="32" y="0" width="1" height="54"></rect>
        <rect id="Rectangle-5" fill="#F5F5F5" x="43" y="0" width="1" height="54"></rect>
        <rect id="Rectangle-6" fill="#E9E9E9" x="0" y="0" width="53" height="1"></rect>
        <rect id="Rectangle-7" fill="#F5F5F5" x="0" y="21" width="53" height="1"></rect>
        <rect id="Rectangle-8" fill="#F5F5F5" x="0" y="32" width="53" height="1"></rect>
        <rect id="Rectangle-9" fill="#F5F5F5" x="0" y="43" width="53" height="1"></rect>
        <rect id="Rectangle-10" fill="#E9E9E9" x="0" y="0" width="1" height="54"></rect>
    </g>
</svg>
```
# 6. è®¾ç½®é”®ç›˜å¿«æ·é”® Keyboardï¼š
> å¿«æ·é”®åœ¨æµç¨‹å›¾äº§å“ä¸­ä¹Ÿæ˜¯æ¯”ä¸å¯å°‘çš„ä¸€å—åŠŸèƒ½ï¼Œå¯ä»¥å¤§å¤§æ–¹ä¾¿ä½¿ç”¨è€…çš„ä½“éªŒï¼Œåœ¨LFä¸­é»˜è®¤å…³é—­äº†å¿«æ·é”®çš„ä½¿ç”¨ï¼Œå¯ä»¥åœ¨å®ä¾‹åŒ–LFæ—¶é€šè¿‡å¯ç”¨`enabled`é€‰é¡¹æ¥æ”¯æŒï¼›LFé™¤å†…ç½®çš„å¿«æ·é”®å¤–ä¹Ÿæ”¯æŒè‡ªå®šä¹‰æ¥æ‰©å±•å¿«æ·é”®çš„ä½¿ç”¨ï¼›

1. å†…ç½®å¿«æ·é”®ï¼š
| **å¿«æ·é”®** | **åŠŸèƒ½** |
| --- | --- |
| cmd + c æˆ– ctrl + c | å¤åˆ¶èŠ‚ç‚¹ |
| cmd + v æˆ– ctrl + v | ç²˜è´´èŠ‚ç‚¹ |
| cmd + z æˆ– ctrl + z | æ’¤é”€æ“ä½œ |
| cmd + y æˆ– ctrl + y | å›é€€æ“ä½œ |
| backspace | åˆ é™¤æ“ä½œ |

2. å¯ç”¨å¿«æ·é”®ï¼š
```typescript
<script setup lang="ts">

onMounted(() => {
  lf.value = new LogicFlow({
    container: container.value,
    keyboard: {
      enabled: true
    },
  })

  lf.value.render(graphData);
})
</script>
```

3. è‡ªå®šä¹‰å¿«æ·é”®ï¼š
> å¿«æ·é”®keysçš„å®šä¹‰è§„åˆ™åŒmousetrapï¼›ä¸‹é¢ä½¿ç”¨å®˜ç½‘çš„ç¤ºä¾‹æ¥æ¼”ç¤ºè‡ªä¹‰å®šåˆ é™¤èŠ‚ç‚¹çš„å¿«æ·é”®è§¦å‘æ—¶å¢åŠ äºŒæ¬¡ç¡®è®¤çš„æé†’ï¼›

```typescript
<script setup lang="ts">

onMounted(() => {
  lf.value = new LogicFlow({
    container: container.value,
    keyboard: {
      enabled: true,
      shortcuts: [
        {
          keys: ["backspace"],
          callback: () => {
            const r = window.confirm("ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ");
            if (r) {
              const elements = lf.value!.getSelectElements(true);
              lf.value?.clearSelectElements();
              elements.edges.forEach((edge: EdgeConfig) => lf.value!.deleteEdge(edge.id || ''));
              elements.nodes.forEach((node: NodeConfig) => lf.value!.deleteNode(node.id || ''));
            }
          }
        }
      ]
    },
  })

  lf.value.render(graphData);
})
</script>
```
# 7. è®¾ç½®å›¾ç¼–è¾‘æ–¹å¼ï¼š
> LFæä¾›äº†æ›´å¤šæ–¹ä¾¿æ§åˆ¶å›¾ç¼–è¾‘æ–¹å¼çš„é€‰é¡¹ï¼ŒåŒæ ·æ˜¯å¯ä»¥åœ¨å®ä¾‹åŒ–LFæ—¶é€šè¿‡é€‰é¡¹åˆå§‹åŒ–ï¼Œä¹Ÿæ”¯æŒå®ä¾‹åŒ–LFåé€šè¿‡`lf.updateEditConfig`å‡½æ•°è¿›è¡Œè°ƒæ•´ï¼›

å›¾ç¼–è¾‘æ¨¡å¼æ”¯æŒçš„é€‰é¡¹åˆ—ä¸¾ï¼ˆå®Œæ•´çš„é€‰é¡¹åˆ—è¡¨è¯¦è§[editConfigModelApi](http://logic-flow.org/api/editConfigModelApi.html)ï¼‰ï¼š

| **å±æ€§å** | **é»˜è®¤å€¼** | **è¯´æ˜** |
| --- | --- | --- |
| isSilentMode | false | æ˜¯å¦ä¸ºé™é»˜æ¨¡å¼ |
| stopZoomGraph | false | ç¦æ­¢ç¼©æ”¾ç”»å¸ƒ |
| stopScrollGraph | false | ç¦æ­¢é¼ æ ‡æ»šåŠ¨ç§»åŠ¨ç”»å¸ƒ |
| stopMoveGraph | false | ç¦æ­¢æ‹–åŠ¨ç”»å¸ƒ |

1. å¦‚ä¸‹å¯ç”¨äº†åªè¯»çš„é™é»˜æ¨¡å¼ã€ç¦æ­¢ç¼©æ”¾ã€ç¦æ­¢é¼ æ ‡æ»šåŠ¨ç§»åŠ¨ç”»å¸ƒã€ç¦æ­¢æ‹–åŠ¨ç”»å¸ƒï¼š
```typescript
<script setup lang="ts">

onMounted(() => {
  lf.value = new LogicFlow({
    container: container.value,
    isSilentMode: true, // é™é»˜æ¨¡å¼
    stopZoomGraph: true, // ç¦æ­¢ç¼©æ”¾
    stopScrollGraph: true, // ç¦æ­¢é¼ æ ‡æ»šåŠ¨ç§»åŠ¨ç”»å¸ƒ
    stopMoveGraph: true, // ç¦æ­¢æ‹–åŠ¨ç”»å¸ƒ
  })

  lf.value.render(graphData);
})
</script>
```

2. é€šè¿‡`lf.updateEditConfig`æ›´çµæ´»çš„è°ƒæ•´ï¼š
```typescript
<script setup lang="ts">

onMounted(() => {
  lf.value.updateEditConfig({
    isSilentMode: false
  });
})
</script>
```
---

**å¦‚æœçœ‹å®Œè§‰å¾—æœ‰æ”¶è·ï¼Œæ¬¢è¿ç‚¹èµã€è¯„è®ºã€åˆ†äº«æ”¯æŒä¸€ä¸‹ã€‚ä½ çš„æ”¯æŒå’Œè‚¯å®šï¼Œæ˜¯æˆ‘åšæŒå†™ä½œçš„åŠ¨åŠ›~**