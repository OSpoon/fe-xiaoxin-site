---
title: æ„å»ºå·¥å…·Gulp-lesson5
date: '2022-05-30 20:32'
sidebar: 'auto'
categories:
 - 
tags:
 - 
---

:::tip
è¿™ä¸€èŠ‚æˆ‘ä»¬å°†ä»ä¸‹é¢è¿™ä¸€æ®µä»£ç å¼€å§‹å¢åŠ å†…å®¹ï¼Œæ¥çœ‹ä¸€ä¸‹ gulp çš„ä¸€äº›äº§èƒ½å¸¸ç”¨æ’ä»¶å’Œä½¿ç”¨çš„æ–¹å¼ã€‚
:::

<!-- more -->

## å‰è¨€
------

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯[å°é‘«åŒå­¦](https://it200.cn/ "https://it200.cn/")ã€‚ä¸€ä½ä»äº‹è¿‡**Androidå¼€å‘**ã€**æ··åˆå¼€å‘**ï¼Œç°åœ¨é•¿æœŸä»äº‹**å‰ç«¯å¼€å‘**çš„ç¼–ç¨‹çˆ±å¥½è€…ï¼Œ**æˆ‘è§‰å¾—åœ¨ç¼–ç¨‹ä¹‹è·¯ä¸Šæœ€é‡è¦çš„æ˜¯çŸ¥è¯†çš„åˆ†äº«ï¼Œæ‰€è°“ä¸‰äººè¡Œå¿…æœ‰æˆ‘å¸ˆ**ã€‚æ‰€ä»¥æˆ‘å¼€å§‹åœ¨ç¤¾åŒºæŒç»­è¾“å‡ºæˆ‘æ‰€äº†è§£åˆ°ã€å­¦ä¹ åˆ°ã€å·¥ä½œä¸­é‡åˆ°çš„å„ç§ç¼–ç¨‹çŸ¥è¯†ï¼Œæ¬¢è¿æœ‰æƒ³æ³•ã€æœ‰åŒæ„Ÿçš„ä¼™ä¼´åŠ æˆ‘[fe-xiaoxin](https://it200.cn/ "https://it200.cn/")å¾®ä¿¡äº¤æµ~

Gulp æ’ä»¶åˆ—è¡¨ï¼š<https://gulpjs.com/plugins/>

è¿™ä¸€èŠ‚æˆ‘ä»¬å°†ä»ä¸‹é¢è¿™ä¸€æ®µä»£ç å¼€å§‹å¢åŠ å†…å®¹ï¼Œæ¥çœ‹ä¸€ä¸‹ gulp çš„ä¸€äº›äº§èƒ½å¸¸ç”¨æ’ä»¶å’Œä½¿ç”¨çš„æ–¹å¼ã€‚

```
const { src, dest } = require("gulp");

function build() {
  return src("src/*.js").pipe(dest("output"));
}

exports.default = build;
```

## [gulp-rename](https://github.com/hparra/gulp-rename)ï¼š

å¯ä»¥ä¾¿æ·çš„åœ¨è¾“å‡ºç¼–è¯‘äº§ç‰©åˆ°æ–‡ä»¶ä¸­æ—¶å¯¹æ–‡ä»¶å‘½åè¿›è¡Œè°ƒæ•´ï¼Œå·²é€‚åº”ä¸åŒçš„åœºæ™¯ã€‚

```
const rename = require("gulp-rename");
```

### ä½¿ç”¨å›ºå®šå‘½åè¾“å‡ºï¼š

å®‰è£…ç®¡é“ï¼š`rename('main.js')`ï¼›

```
function build() {
  return src("src/*.js")
  .pipe(rename('main.js'))
  .pipe(dest("output"));
}
```

### å¢åŠ ç‰¹å®šçš„æ ‡è¯†ï¼š

ä¸º rename çš„å‚æ•°æä¾›ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨æ‰§è¡Œåˆ°è¿™ä¸ªå‡½æ•°æ—¶ä¼šä¼ å…¥ä¸€ä¸ª path å¯¹è±¡ï¼ŒåŒ…å«dirnameã€basenameã€extnameä¸‰ä¸ªå±æ€§ï¼Œæˆ‘ä»¬è¿™é‡ŒåŠ¨æ€ä¿®æ”¹basenameï¼Œä¸ºå…¶å¢åŠ ä¸€ä¸ªå½“å‰ç¼–è¯‘çš„æ—¶é—´ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ return çš„ç»“æœéœ€è¦åŒ…å« path å®Œæ•´çš„ä¸‰ä¸ªå±æ€§ï¼Œæœªä¿®æ”¹çš„æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç»“æ„æ¥èµ‹å€¼ã€‚

```
function build() {
  const localTime = new Date().toLocaleTimeString();
  return src("src/*.js")
    .pipe(
      rename(function (path) {
        return {
          ...path,
          basename: `${path.basename}-${localTime}`,
        };
      })
    )
    .pipe(dest("output"));
}
```

è¿˜æœ‰ä¸€ä¸ªæ–¹å¼å°±æ˜¯æˆ‘ä»¬ç›´æ¥ä¿®æ”¹ä¼ å…¥çš„ path çš„å€¼è€Œä¸å» return ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚

```
function build() {
  const localTime = new Date().toLocaleTimeString();
  return src("src/*.js")
    .pipe(
      rename(function (path) {
        path.basename += `-${localTime}`;
      })
    )
    .pipe(dest("output"));
}
```

## [gulp-uglify](https://github.com/terinjokes/gulp-uglify/)ï¼š

å¯ä»¥åœ¨æˆ‘ä»¬æ„å»º JavaScript ä»£ç åè¿›è¡Œå‹ç¼©æ¥å‡å°è¾“å‡ºäº§ç‰©çš„ä½“ç§¯ã€‚

```
const uglify = require('gulp-uglify');
```

```
function build() {
  const localTime = new Date().toLocaleTimeString();
  return src("src/*.js")
  .pipe(uglify())
  .pipe(dest("output"));
}
```

## [gulp-sass](https://github.com/dlmanning/gulp-sass)ï¼š

å°†æˆ‘ä»¬ç¼–å†™çš„ sass æ–‡ä»¶ç¼–è¯‘ä¸ºæµè§ˆå™¨å¯ä»¥æ­£å¸¸è¯†åˆ«çš„ css æ–‡ä»¶ï¼Œæˆ‘ä»¬è¦åŒæ—¶å®‰è£… sass å’Œ gulp-sass æ’ä»¶ã€‚

```
const sass = require('gulp-sass')(require('sass'));
```

ä¸‹é¢çš„ä»£ç æ˜¯ sass æ•™ç¨‹çš„ç¬¬ä¸€å—å†…å®¹ï¼Œå°†å˜é‡æ’å…¥åˆ°æœ€åç¼–è¯‘çš„ç»“æœä¸­ã€‚

```
$nav-color: #F90;
nav {
  $width: 100px;
  width: $width;
  color: $nav-color;
}

//ç¼–è¯‘å

nav {
  width: 100px;
  color: #F90;
}
```

æ”¹å˜æˆ‘ä»¬çš„ build ä»»åŠ¡å‡½æ•°åæ‰§è¡Œ gulp å¾—åˆ°çš„äº§ç‰©ä¸ğŸ‘†ğŸ»æ•™ç¨‹å¾—åˆ°äº†ä¸€ç›´çš„å†…å®¹ï¼š

```
function build() {
  return src("src/*.scss")
    .pipe(sass().on("error", sass.logError))
    .pipe(dest("output/css"));
}
```

## [gulp-open](https://github.com/stevelacy/gulp-open)ï¼š

æ”¯æŒæˆ‘ä»¬åœ¨ç¼–è¯‘åæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æˆ– URLï¼Œå¾€å¾€åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨çš„ CLI éƒ½æä¾›äº†è¿™æ ·çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨å¯åŠ¨é¡¹ç›®åå°±é»˜è®¤ç»™æˆ‘ä»¬æ‰“å¼€äº†é¦–é¡µã€‚

```
const open = require('gulp-open');
```

```
function build() {
  return src("src/index.html").pipe(open());
}
```

æˆ‘ä»¬è¿˜å¯ä»¥å¢åŠ å‚æ•°æ¥é€‚é…ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼š

```
const browser =
  os.platform() === "linux"
    ? "google-chrome"
    : os.platform() === "darwin"
    ? "google chrome"
    : os.platform() === "win32"
    ? "chrome"
    : "firefox";

function build() {
  return src("src/index.html").pipe(open({ app: browser }));
}
```

ä¸Šé¢çš„æ¡ˆä¾‹æˆ‘ä»¬æ‰“å¼€äº†é€šè¿‡ src æ‰§è¡Œçš„è¾“å…¥çš„æ–‡ä»¶è·¯å¾„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŒ‡å®š uri æ¥æ‰“å¼€æŒ‡å®šçš„åœ°å€ï¼š

```
function build() {
  return src("src/*js").pipe(open({ uri: "http://vp.it200.cn" }));
}
```

## ç»“è¯­ï¼š

æˆ‘ä»¬è¿™é‡Œä»‹ç»äº†å‡ ä¸ªè¿˜æ¯”è¾ƒå¸¸è§çš„æ’ä»¶ï¼Œæ›´å¤šçš„ç¼–è¯‘åœºæ™¯å¯ä»¥æŸ¥æ‰¾åˆé€‚çš„æ’ä»¶æ¥ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç¼–å†™ç¬¦åˆç‰¹å®šåœºæ™¯çš„æ’ä»¶ã€‚æ˜å¤©æˆ‘ä»¬ç»§ç»­å­¦ä¹ ã€‚

* * *

**å¦‚æœçœ‹å®Œè§‰å¾—æœ‰æ”¶è·ï¼Œæ¬¢è¿ç‚¹èµã€è¯„è®ºã€åˆ†äº«æ”¯æŒä¸€ä¸‹ã€‚ä½ çš„æ”¯æŒå’Œè‚¯å®šï¼Œæ˜¯æˆ‘åšæŒå†™ä½œçš„åŠ¨åŠ›~**

æœ€åå¯ä»¥å…³æ³¨æˆ‘@å°é‘«åŒå­¦ã€‚æ¬¢è¿[ç‚¹æ­¤æ‰«ç åŠ æˆ‘å¾®ä¿¡](https://it200.cn/ "https://it200.cn/")[fe-xiaoxin](https://it200.cn/ "https://it200.cn/")äº¤æµï¼Œå…±åŒè¿›æ­¥ï¼ˆè¿˜å¯ä»¥å¸®ä½ **fix**ğŸ›ï¼‰~