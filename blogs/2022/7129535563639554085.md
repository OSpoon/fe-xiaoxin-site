---
title: ã€å…¥é—¨ã€‘ä½ è¿Babeléƒ½ä¸ä¼šé…ï¼Ÿé‚£æ’ä»¶ä¸æˆä¹±è£…äº† 
date: '2022-08-09 00:01'
sidebar: 'auto'
categories:
 - Compiler
tags:
 - Babel
---

:::tip
å¦‚æœä½ æœ‰é¡¹ç›®æ­å»ºçš„éœ€æ±‚ï¼Œå·¥å…·é“¾å¼€å‘çš„éœ€æ±‚ï¼Œé‚£ä¹ˆ **Babel** ç›®å‰ä»æ˜¯ä¸€ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆé«˜é¢‘ä½¿ç”¨çš„äº§å“ï¼Œåœ¨å„æµè§ˆå™¨å‚å•†çº·çº·æ‹¥æŠ±**W3C**æ ‡å‡†çš„æ—¶å€™è¿˜æ˜¯ä¼šé‡åˆ°éœ€è¦å°† **ES2015+** çš„è¯­æ³•è¿›è¡Œé™çº§ï¼Œä½¿å¾—å¯ä»¥åœ¨ä½ç‰ˆæœ¬çš„æµè§ˆå™¨åŠå…¶ä»–ç¯å¢ƒä¸­æ­£å¸¸ä½¿ç”¨ã€‚
:::

<!-- more -->

## 1. å‰è¨€
------

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯[å°é‘«åŒå­¦](https://juejin.cn/user/3966693685871694 "https://juejin.cn/user/3966693685871694")ã€‚ä¸€ä½ä»äº‹è¿‡**Androidå¼€å‘**ã€**æ··åˆå¼€å‘**ï¼Œç°åœ¨é•¿æœŸä»äº‹**å‰ç«¯å¼€å‘**çš„ç¼–ç¨‹çˆ±å¥½è€…ï¼Œ**æˆ‘è§‰å¾—åœ¨ç¼–ç¨‹ä¹‹è·¯ä¸Šæœ€é‡è¦çš„æ˜¯çŸ¥è¯†çš„åˆ†äº«ï¼Œæ‰€è°“ä¸‰äººè¡Œå¿…æœ‰æˆ‘å¸ˆ**ã€‚æ‰€ä»¥æˆ‘å¼€å§‹åœ¨ç¤¾åŒºæŒç»­è¾“å‡ºæˆ‘æ‰€äº†è§£åˆ°ã€å­¦ä¹ åˆ°ã€å·¥ä½œä¸­é‡åˆ°çš„å„ç§ç¼–ç¨‹çŸ¥è¯†ï¼Œæ¬¢è¿æœ‰æƒ³æ³•ã€æœ‰åŒæ„Ÿçš„ä¼™ä¼´åŠ æˆ‘[fe-xiaoxin](https://juejin.cn/pin/7126196941574111262 "https://juejin.cn/pin/7126196941574111262")å¾®ä¿¡äº¤æµ~

å¦‚æœä½ æœ‰é¡¹ç›®æ­å»ºçš„éœ€æ±‚ï¼Œå·¥å…·é“¾å¼€å‘çš„éœ€æ±‚ï¼Œé‚£ä¹ˆ **Babel** ç›®å‰ä»æ˜¯ä¸€ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆé«˜é¢‘ä½¿ç”¨çš„äº§å“ï¼Œåœ¨å„æµè§ˆå™¨å‚å•†çº·çº·æ‹¥æŠ±**W3C**æ ‡å‡†çš„æ—¶å€™è¿˜æ˜¯ä¼šé‡åˆ°éœ€è¦å°† **ES2015+** çš„è¯­æ³•è¿›è¡Œé™çº§ï¼Œä½¿å¾—å¯ä»¥åœ¨ä½ç‰ˆæœ¬çš„æµè§ˆå™¨åŠå…¶ä»–ç¯å¢ƒä¸­æ­£å¸¸ä½¿ç”¨ã€‚

## 2. Babel èƒ½æä»€ä¹ˆï¼Ÿ
---------------

**Babel** ä½œä¸ºä¸€æ¬¾å·¥å…·é“¾äº§å“å¯ä»¥è¾…åŠ©æˆ‘ä»¬åœ¨JavaScript ç¼–å†™æ—¶æ›´æ”¾å¿ƒçš„å»ä½¿ç”¨ä¸€äº›è¾ƒæ–°çš„æˆ–æœ€æ–°çš„è¯­æ³•ï¼Œå¯¹äºæµè§ˆå™¨æˆ–å…¶ä»–ç¯å¢ƒä¸èƒ½å¾ˆå¥½å…¼å®¹çš„äº‹æƒ…å…¨éƒ¨äº¤ç»™ **Babel** è‡ªè¡Œå¤„ç†ï¼Œæ‰€ä»¥è¯´ **Babel** åœ¨æˆ‘ä»¬ç¼–ç çš„è¿‡ç¨‹ä¸­ä¸»è¦èµ·åˆ°äº†**è¯­æ³•è½¬æ¢**å’Œ **Polyfill** çš„åŠŸèƒ½ã€‚

## 3. MVPç¯å¢ƒé…ç½®ï¼š
------------

è¿™é‡Œçš„ MVP æŒ‡çš„æ˜¯äº§å“ç†è®ºï¼ŒæŒ‡çš„æ˜¯**æœ€ç®€å¯è¡ŒåŒ–åˆ†æ**ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®ä¸€ä¸ªæ»¡è¶³æœ€åŸºæœ¬ Babel è¿è¡Œçš„é¡¹ç›®ç¯å¢ƒã€‚

| ä¾èµ–é¡¹ | ä½œç”¨ |
| --- | --- |
| @babel/core | babel è¿è¡Œçš„æ ¸å¿ƒæ¨¡å—ã€‚ |
| @babel/cli | babel é…å¥—ä½¿ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ã€‚ |
| @babel/plugin-transform-arrow-functions | è¯­æ³•è½¬æ¢æ’ä»¶çš„å…¶ä¸­ä¹‹ä¸€ï¼Œç”¨äºå°†ç®­å¤´å‡½æ•°è½¬ä¸ºæ™®é€šå‡½æ•°ã€‚ |

æˆ‘ä»¬éœ€è¦ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·æ¥å¯åŠ¨ babel æ ¸å¿ƒæ¨¡å—è¿›è¡Œå·¥ä½œï¼Œå…¶ä¸­æ‰€åšçš„å…·ä½“å·¥ä½œæœ‰å„ç§å„æ ·çš„**æ’ä»¶**æˆ–**é¢„è®¾**çš„é›†åˆæ¥æä¾›ï¼Œå½“å®˜æ–¹å’Œç¤¾åŒºçš„æ’ä»¶å’Œé¢„è®¾æ— æ³•æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚æ—¶å°±éœ€è¦æˆ‘ä»¬è‡ªå®šä¹‰æ’ä»¶æ¥å®Œæˆï¼Œè¿™ä¸ªæˆ‘ä»¬å…ˆæ¥æ¼”ç¤º**ä¸€ä¸ª MVP çº§åˆ«çš„ç®­å¤´å‡½æ•°åˆ°æ™®é€šå‡½æ•°è½¬æ¢**~

### 3.1 åˆå§‹åŒ–é¡¹ç›®

#### 3.1.1 åˆå§‹åŒ–ç›®å½•ï¼š

```
mkdir babel-study && pnpm init

```

#### 3.1.2 å®‰è£…å„ä¾èµ–ï¼š

1.  `pnpm add -D @babel/core`ï¼›
2.  `pnpm add -D @babel/cli`ï¼›
3.  `pnpm add -D @babel/plugin-transform-arrow-functions`ï¼›

### 3.2 é…ç½®æ–‡ä»¶å’Œç¼–è¯‘å‘½ä»¤

#### 3.2.1 æ’å…¥ babel ç¼–è¯‘å‘½ä»¤:

ç¼–è¯‘ src ç›®å½•ä¸‹çš„ js æ–‡ä»¶å¹¶è¾“å‡ºåˆ° output ç›®å½•

```
{
    "build": "./node_modules/.bin/babel ./src -d output"
}

```

#### 3.2.2 åˆ›å»º babel é…ç½®æ–‡ä»¶ï¼š

åˆ›å»ºä¸€ä¸ªåç¼€åä¸º `.js` çš„é…ç½®æ–‡ä»¶ï¼ˆ`babel.config.js`ï¼‰å¹¶é…ç½®**æ’ä»¶åˆ—è¡¨**ï¼Œ**é¢„è®¾åˆ—è¡¨**çš„ä½¿ç”¨åé¢ä¼šè®²åˆ°ï¼š

```
const presets = [];

const plugins = ["@babel/plugin-transform-arrow-functions"];

module.exports = { presets, plugins };

```

### 3.3 æ’å…¥æºç å¹¶ç¼–è¯‘ï¼š

#### 3.3.1 åœ¨ src ç›®å½•æ’å…¥ä¸‹é¢çš„æºç ï¼š

å¦‚ä¸‹ä»£ç åŒ…å«äº†å—çº§ä½œç”¨åŸŸå˜é‡çš„å®šä¹‰ã€**ç®­å¤´å‡½æ•°**å’Œæ¨¡æ¿å­—ç¬¦ä¸²ä½¿ç”¨

```
const say = (value) => {
  console.log(`hello ${value}`);
};

```

#### 3.3.2 æ‰§è¡Œç¼–è¯‘å‘½ä»¤å¹¶é¢„è§ˆç»“æœï¼š

æ‰§è¡Œ `pnpm build` å‘½ä»¤ååœ¨ç»ˆç«¯å°†è¾“å‡º Babel ä¸ºæˆ‘ä»¬å¤„ç†æˆåŠŸäº†ä¸€ä¸ªæ–‡ä»¶çš„æç¤ºï¼š

```
outputï¼šSuccessfully compiled 1 file with Babel (402ms).

```

ä½¿ç”¨`@babel/plugin-transform-arrow-functions`å¤„ç†åçš„ç»“æœï¼š

```
const say = function (value) {
  console.log(`hello ${value}`);
};

```

### 3.4 å¤„ç†æ‰æ›´å¤šçš„è¯­æ³•ï¼š

#### 3.4.1 è½¬æ¢å—çº§å˜é‡å®šä¹‰ï¼š

å®‰è£…å¹¶é…ç½®æ’ä»¶ï¼š[@babel/plugin-transform-block-scoping](https://link.juejin.cn/?target=https%3A%2F%2Fbabeljs.io%2Fdocs%2Fen%2Fbabel-plugin-transform-block-scoping "https://babeljs.io/docs/en/babel-plugin-transform-block-scoping")

```
const presets = [];

const plugins = [
  "@babel/plugin-transform-arrow-functions",
  "@babel/plugin-transform-block-scoping",
];

module.exports = { presets, plugins };

```

è½¬æ¢ç»“æœï¼š

```
var say = function (value) {
  console.log(`hello ${value}`);
};

```

#### 3.4.2 è½¬æ¢æ¨¡æ¿å­—ç¬¦ä¸²ï¼š

å®‰è£…å¹¶é…ç½®å¼•å…¥æ’ä»¶ï¼š[@babel/plugin-transform-template-literals](https://link.juejin.cn/?target=https%3A%2F%2Fbabeljs.io%2Fdocs%2Fen%2Fbabel-plugin-transform-template-literals "https://babeljs.io/docs/en/babel-plugin-transform-template-literals")

```
const presets = [];

const plugins = [
  "@babel/plugin-transform-arrow-functions",
  "@babel/plugin-transform-block-scoping",
  "@babel/plugin-transform-template-literals",
];

module.exports = { presets, plugins };

```

è½¬æ¢ç»“æœï¼š

```
var say = function (value) {
  console.log("hello ".concat(value));
};

```

#### 3.4.3 æ›´ä¼˜é›…çš„å¤„ç†æ–¹å¼ï¼š

æˆ‘ä»¬åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„æ’ä»¶æ¥å¤„ç†æ‰äº†ä¸åŒçš„è¯­æ³•ï¼Œ`ES2015+`æä¾›çš„è¯­æ³•æœ‰ä¸å°‘ï¼Œæˆ‘ä»¬è™½ç„¶å¯ä»¥ä¸€ä¸ªä¸ªæ’ä»¶å®‰è£…æ¥å¤„ç†ä½†ä¸æ˜¯æœ€ä¼˜é›…çš„æ–¹å¼ï¼Œè¿™é‡Œå°±éœ€è¦ç”¨åˆ°**é¢„è®¾**ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºé¢„è®¾å°±æ˜¯ä¸€ç»„æ’ä»¶çš„é›†åˆã€‚

[@babel/preset-env](https://link.juejin.cn/?target=https%3A%2F%2Fbabeljs.io%2Fdocs%2Fen%2Fbabel-preset-env "https://babeljs.io/docs/en/babel-preset-env")å°±æ˜¯Babel å®˜æ–¹ç»´æŠ¤çš„ JavaScript è½¬æ¢é¢„è®¾ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹é¢„è®¾çš„ä½¿ç”¨ï¼š

1.  å®‰è£…ä¾èµ–ï¼š`pnpm add -D @babel/preset-env`;
2.  é…ç½®é¢„è®¾å¹¶å–æ¶ˆæ’ä»¶åˆ—è¡¨ï¼š

```
const presets = [
    [
        "@babel/preset-env", // æ•´åˆäº†å°½å¯èƒ½å…¨çš„JavaScriptè¯­æ³•è½¬æ¢çš„é¢„è®¾
    ],
];

const plugins = [
//   "@babel/plugin-transform-arrow-functions",   // â‘  ç®­å¤´å‡½æ•°
//   "@babel/plugin-transform-block-scoping",     // â‘¡ å—çº§ä½œç”¨åŸŸ
//   "@babel/plugin-transform-template-literals", // â‘¢ æ¨¡æ¿å­—ç¬¦ä¸²
];

module.exports = { presets, plugins };

```

3.  è½¬æ¢ç»“æœï¼š

```
"use strict";

var say = function say(value) {
  console.log("hello ".concat(value));
};

```

## 4. æ”¯æŒ TypeScriptï¼Ÿ
------------------

### 4.1 åœ¨ src ç›®å½•ä¸‹æ’å…¥ä¸‹é¢çš„æºç ï¼š

```
const person: {
  name: string;
  age: number;
} = {
  name: "TypeScript",
  age: 16,
};
console.log(person?.name);

```

### 4.2 å®‰è£…å¹¶é…ç½®[@babel/preset-typescript](https://link.juejin.cn/?target=https%3A%2F%2Fwww.babeljs.cn%2Fdocs%2Fbabel-preset-typescript "https://www.babeljs.cn/docs/babel-preset-typescript")ï¼š

```
const presets = [
  [
    "@babel/preset-env", // æ•´åˆäº†å°½å¯èƒ½å…¨çš„JavaScriptè¯­æ³•è½¬æ¢çš„é¢„è®¾
  ],
  "@babel/preset-typescript",
];

const plugins = [];

module.exports = { presets, plugins };

```

### 4.3 æ·»åŠ ä¸€æ¡æ–°çš„ç¼–è¯‘scriptsï¼š

é€šè¿‡å¢åŠ `-x '.ts'`å‚æ•°æ¥æ”¯æŒ babel è¯†åˆ« `.ts` æ–‡ä»¶ï¼š

```
{
    "build:ts": "./node_modules/.bin/babel ./src -d output -x '.ts'"
}

```

### 4.4 è½¬æ¢ç»“æœï¼š

```
"use strict";

var person = {
  name: "TypeScript",
  age: 16
};
console.log(person === null || person === void 0 ? void 0 : person.name);

```

## 5. æ€»ç»“
------

1.  Babel å®˜ç½‘æä¾›äº† [ES2015+](https://link.juejin.cn/?target=https%3A%2F%2Fbabeljs.io%2Fdocs%2Fen%2Flearn "https://babeljs.io/docs/en/learn") å„è¯­æ³•çš„æ¼”ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ç…§å„ä¸ªè¯­æ³•å’Œå¯¹åº”çš„æ’ä»¶æ¥æ„Ÿå— Babel è¯­æ³•è½¬æ¢çš„å¥¥å¦™~
2.  å½“æˆ‘ä»¬ä¸å…¶å®ƒçš„**æ„å»ºç³»ç»Ÿ**ã€**æ¡†æ¶**ã€**è¯­è¨€ API**æ­é…ä½¿ç”¨æ—¶è¿˜éœ€è¦æ›´å¤šçš„é…ç½®æ¥æ”¯æŒï¼Œå¯ä»¥åœ¨ [Using Babel](https://link.juejin.cn/?target=https%3A%2F%2Fbabeljs.io%2Fsetup "https://babeljs.io/setup") æŸ¥çœ‹ã€‚
3.  æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ [REPL](https://link.juejin.cn/?target=https%3A%2F%2Fbabeljs.io%2Frepl "https://babeljs.io/repl") æ¥åœ¨çº¿æŸ¥çœ‹è¯­æ³•çš„è½¬æ¢ã€‚

æœ¬æ–‡é¡¹ç›®å·²æ¨é€è‡³GitHubï¼Œæ¬¢è¿å…‹éš†æ¼”ç¤ºï¼š`git clone git@github.com:OSpoon/babel-study.git`

* * *

**å¦‚æœçœ‹å®Œè§‰å¾—æœ‰æ”¶è·ï¼Œæ¬¢è¿ç‚¹èµã€è¯„è®ºã€åˆ†äº«æ”¯æŒä¸€ä¸‹ã€‚ä½ çš„æ”¯æŒå’Œè‚¯å®šï¼Œæ˜¯æˆ‘åšæŒå†™ä½œçš„åŠ¨åŠ›~**

æœ€åå¯ä»¥å…³æ³¨æˆ‘@å°é‘«åŒå­¦ã€‚æ¬¢è¿[ç‚¹æ­¤æ‰«ç åŠ æˆ‘å¾®ä¿¡](https://juejin.cn/pin/7126196941574111262 "https://juejin.cn/pin/7126196941574111262")[fe-xiaoxin](https://juejin.cn/pin/7126196941574111262 "https://juejin.cn/pin/7126196941574111262")äº¤æµï¼Œå…±åŒè¿›æ­¥ï¼ˆè¿˜å¯ä»¥å¸®ä½ **fix**ğŸ›ï¼‰~