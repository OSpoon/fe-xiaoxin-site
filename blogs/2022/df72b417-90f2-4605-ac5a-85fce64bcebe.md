---
title: æ•™å­¦ï¼šåˆ¶ä½œ GitHub åŒæ­¥è¿‘æœŸåšå®¢å¡ç‰‡
date: '2022-11-15 21:33'
sidebar: 'auto'
categories:
 - å®æˆ˜æ¡ˆä¾‹
tags:
 - Github
 - Node
---

:::tip
è¿™å‡ å¤©çœ‹åˆ°æœ‰å°ä¼™ä¼´å°†è‡ªå·±è¿‘æœŸæ›´æ–°çš„åšå®¢åŒæ­¥æ˜¾ç¤ºåˆ°äº†GitHubä¸»é¡µï¼Œè¿™ä¹ˆæœ‰è¶£çš„å°å¡ç‰‡æˆ‘æ˜¯ä¸€å®šè¦å°è¯•ä¸€æŠŠçš„ï¼Œå®Œæ•´çš„æ•™ç¨‹æˆ‘å·²ç»æ•´ç†å¥½äº†ï¼Œä¸€èµ·æèµ·æ¥å§~
:::

<!-- more -->

> å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯[å°é‘«åŒå­¦](https://it200.cn/)ã€‚ä¸€ä½é•¿æœŸä»äº‹**å‰ç«¯å¼€å‘**çš„ç¼–ç¨‹çˆ±å¥½è€…ï¼Œ**æˆ‘ä¿¡å¥‰ç¼–ç¨‹æœ€é‡è¦çš„æ˜¯åˆ†äº«**ã€‚è¯·è·Ÿéšå°é‘«åŒå­¦çš„æ­¥ä¼ï¼Œä¸€èµ·å¸¦ä½ ç•…æ¸¸ä¸ä¸€æ ·çš„å‰ç«¯ä¸–ç•Œ~


è¿™å‡ å¤©çœ‹åˆ°æœ‰å°ä¼™ä¼´å°†è‡ªå·±è¿‘æœŸæ›´æ–°çš„åšå®¢åŒæ­¥æ˜¾ç¤ºåˆ°äº†GitHubä¸»é¡µï¼Œè¿™ä¹ˆæœ‰è¶£çš„å°å¡ç‰‡æˆ‘æ˜¯ä¸€å®šè¦å°è¯•ä¸€æŠŠçš„ï¼Œå®Œæ•´çš„æ•™ç¨‹æˆ‘å·²ç»æ•´ç†å¥½äº†ï¼Œä¸€èµ·æèµ·æ¥å§~
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2373519/1668515823729-8fbd1a4a-4d82-45cf-9b98-d292140b8191.png#averageHue=%23fbfaf9&clientId=ub1b69c7f-1eb7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=889&id=u30294b12&margin=%5Bobject%20Object%5D&name=image.png&originHeight=889&originWidth=1898&originalType=binary&ratio=1&rotation=0&showTitle=false&size=248832&status=done&style=none&taskId=u5a74b0ff-b4b6-46b2-801e-a9d1c2e10b2&title=&width=1898)
## 2. å¼€å§‹æ•™ç¨‹
### 2.1 å®ç°æµç¨‹ï¼š
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2373519/1668510461179-a9adf4ab-712a-4dc8-9d34-dc8c145df0a4.png#averageHue=%23f7f8f9&clientId=uf74140ce-b8c1-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=200&id=u2c328614&margin=%5Bobject%20Object%5D&name=image.png&originHeight=200&originWidth=760&originalType=binary&ratio=1&rotation=0&showTitle=false&size=33853&status=done&style=none&taskId=uca6c8e86-a073-4db4-b100-1a4e5a44a78&title=&width=760)
Githubçš„ä¸»é¡µè£…ä¿®ä¸»è¦è®²çš„å°±æ˜¯ä¸»é¡µçš„Markdownæ–‡æ¡£ï¼Œå½“æˆ‘ä»¬è®¿é—®Githubçš„ä¸»é¡µæ—¶ï¼ŒMarkdownå†…åµŒçš„`img`æ ‡ç­¾å°±ä¼šå¯¹æ–‡ç« å¡ç‰‡æ¥å£å‘èµ·è¯·æ±‚ï¼Œç»æœåŠ¡å™¨å¯¹åšå®¢ç«™ç‚¹æä¾›çš„`RSS`æ•°æ®è§£æè½¬æ¢å¹¶ç”Ÿæˆå¡ç‰‡æ•°æ®ï¼ˆ`svg`ï¼‰è¿”å›åˆ°Githubï¼Œå®Œæˆäº†åšå®¢å¡ç‰‡çš„ä¸€æ¬¡æ¸²æŸ“è¿‡ç¨‹ï¼›
### 2.2 ç¯å¢ƒé…ç½®ï¼š

- Verceléƒ¨ç½²ï¼š[https://vercel.com/](https://vercel.com/)
- ä¾èµ–æ¨¡å—ï¼š
| axios | å‘èµ·è¯·æ±‚ç”¨æ¥è½¬æ¢RSSæ•°æ®ï¼ˆXML to JSONï¼‰ |
| --- | --- |
| art-template | Htmlæ¨¡æ¿å¼•æ“å¿«é€Ÿç”ŸæˆSVGæ•°æ® |
| @vercel/node | å®ç°åšå®¢å¡ç‰‡æ¥å£ |

- ç›®å½•ç»“æ„ä¸»è¦ç”±apiã€generatorsã€parsersç»„æˆï¼š
```
github-readme-recent-article  
â”œâ”€ api                        
â”‚  â””â”€ blog                    
â”‚     â””â”€ [index].ts           
â”œâ”€ generators                 
â”‚  â”œâ”€ index.ts                
â”‚  â”œâ”€ logo.ts                 
â”‚  â””â”€ template.html           
â”œâ”€ parsers                    
â”‚  â””â”€ index.ts                
â”œâ”€ logo.png                   
â”œâ”€ package-lock.json          
â”œâ”€ package.json               
â”œâ”€ readme.md                  
â””â”€ vercel.json
```
## 3. å¼€å§‹ç¼–ç 
### 3.1 ç¼–å†™åˆ†æå™¨ï¼š
> åˆ†æå™¨ä¸»è¦ç”¨æ¥è§£æåšå®¢ç«™ç‚¹æä¾›çš„RSSæ•°æ®ã€‚å¹¶è¿”å›æŒ‡å®šåºå·çš„æ–‡ç« æ•°æ®ï¼Œç”¨æ¥ç”Ÿæˆä¸€å¼ æ–‡ç« å¡ç‰‡~

æä¾›`getArticle`å‡½æ•°è·å–æŒ‡å®šåºå·çš„æ–‡ç« æ•°æ®ï¼Œå…¶ä¸­ä½¿ç”¨åˆ°åœ¨çº¿æœåŠ¡`https://api.rss2json.com/v1/api.json?{rss_url}`æ¥è½¬æ¢RSSæ•°æ®ï¼Œå› ä¸ºæˆ‘ä»¬æ“ä½œJSONè¦ä¸XMLæ›´åŠ çš„æ–¹ä¾¿ï¼š
```typescript
import axios from 'axios';

export const getArticle = async (index) => {
  // é€šè¿‡åœ¨çº¿æœåŠ¡å°†RSSé»˜è®¤çš„xmlæ•°æ®è½¬æ¢ä¸ºJSONæ ¼å¼
  const originUrl = 'https://it200.cn/rss.xml';
  const rssUrl = `https://api.rss2json.com/v1/api.json?rss_url=${originUrl}`;
  const { data: { items } } = await axios.get(rssUrl);
  const { title, pubDate: date, link: url, description } = items[
    index || 0
    ];
  return {
    title: title.length > 20 ? title.substring(0, 20) + ' ...' : title,
    url,
    date,
    description:
      description
      .replace(/<h3>.*<\/h3>|<figcaption>.*<\/figcaption>|<[^>]*>/gm, '')
      .substring(0, 30) + '...',
  };
}
```
### 3.2 ç¼–å†™æ–‡ç« å¡ç‰‡ç”Ÿæˆå™¨ï¼š
> ç”±æ¥å£è¿”å›çš„æ•°ç»„ç»„åˆæˆå®Œæˆçš„SVGæ•°æ®

æ–‡ç« å¡ç‰‡æ•°æ®æ˜¯ä¸€ä¸ªSVGå­—ç¬¦ä¸²ç»„æˆï¼Œè¿™æ ·çš„è¯ä½¿ç”¨`art-template`æ¨¡å—å°†æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œé€šè¿‡å¯¼å‡ºçš„`template`å‡½æ•°å¾ˆæ–¹ä¾¿çš„è·å–çš„å®Œæ•´SVGæ•°æ®æ¥è¿”å›åˆ°Githubï¼š
```typescript
import template from "art-template";
import {logo} from "./logo";

export const genArticleCard = (options: {
    title: string,
    url: string,
    date: string,
    description: string,
}) => {
    const { title, url, date, description } = options;
    return template(`${__dirname}/template.html`, {
        logo,
        title,
        url,
        date,
        description,
    });
}
```
`art-template`æ¨¡å—åŒæ ·ä½¿ç”¨çš„æ˜¯`Mustache`è¯­æ³•ï¼š
```html
<svg fill="none" width="500" height="100" xmlns="http://www.w3.org/2000/svg">
  <foreignObject width="100%" height="100%">
    <div xmlns="http://www.w3.org/1999/xhtml">
      <style>
        ...
      </style>
      <div class="container">
        <img src="{{logo}}" />
        <div>
          <h3>{{title}}</h3>
          <small>{{date}}</small>
          <p>{{description}}</p>
        </div>
      </div>
    </div>
  </foreignObject>
</svg>
```
æ³¨æ„ï¼šåœ¨ä½¿ç”¨æ—¶å‘ç°`Logo`åœ¨`Github`æ¸²æŸ“æ—¶å‡ºç°äº†è·¨åŸŸçš„ç°è±¡ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©ç›´æ¥ä½¿ç”¨`base64`å­—ç¬¦ä¸²æ¥æ›¿æ¢ï¼›
### 3.3 ç¼–å†™æ¥å£ï¼š
> æˆ‘ä»¬é€‰æ‹©éƒ¨ç½²åˆ°`Vercel`ï¼Œæ¥å£ç¼–å†™ä½¿ç”¨`Vercel`çš„è§„åˆ™ï¼›

åœ¨é¡¹ç›®æ ¹ç›®å½•çš„é…ç½®æ–‡ä»¶ä¸­æ ‡æ˜äº†æ¥å£çš„`ROOT`åœ°å€ï¼Œ`[index]`å¯¹åº”ç€è¯·æ±‚æ—¶ä¼ é€’çš„æ–‡ç« åºå·å‚æ•°ï¼š

- æ¥å£åœ°å€å®šä¹‰ï¼š`api\blog\[index].ts`
- æ¥å£å®é™…åœ°å€ï¼š`[https://root-url/blog/0](https://github-readme-recent-article.vercel.app/blog/0)`
```json
{
  "version": 2,
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/api/$1"
    }
  ]
}
```
è§£æè¯·æ±‚å‚æ•°ä¸­çš„`index`ä¼ åˆ°è§£æå™¨ä¸­è·å–æŒ‡å®šçš„æ–‡ç« æ•°æ®ï¼Œå†å°†æ–‡ç« æ•°æ®äº¤ç”±å¡ç‰‡ç”Ÿæˆå™¨ç»„è£…æ•°æ®å¹¶è¿”å›åˆ°è¯·æ±‚æ–¹ï¼š
```typescript
import { NowRequest, NowResponse } from '@vercel/node';
import { getArticle } from '../../parsers/index';
import { genArticleCard } from '../../generators';

export default async (req: NowRequest, res: NowResponse) => {
  const { query: { index } } = req;
  const { title, url, date, description } = await getArticle(index);
  res.setHeader('Cache-Control', 's-maxage=3600, stale-while-revalidate');
  res.setHeader('Content-Type', 'image/svg+xml');
  return res.send(
    genArticleCard({
      title,
      url,
      date,
      description,
    })
  );
}
```
### 3.4 `Vercel`éƒ¨ç½²ï¼š
è®¿é—®[https://vercel.com/new](https://vercel.com/new)é¡µé¢å¼€å§‹æ–°é¡¹ç›®çš„éƒ¨ç½²ï¼Œç¬¬ä¸€æ¬¡éƒ¨ç½²å®Œæˆåï¼Œåç»­å°†è‡ªåŠ¨è¿›è¡Œéƒ¨ç½²ï¼š
é€‰æ‹©ä½ è¦éƒ¨ç½²çš„é¡¹ç›®ï¼Œæ¯”å¦‚è¯´æˆ‘åˆšåˆ›å»ºçš„ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼Œç‚¹å‡»`import`ï¼š
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2373519/1668517891256-9217a53d-c836-41ca-a63a-41965a95668e.png#averageHue=%23f9f9f9&clientId=ub1b69c7f-1eb7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=913&id=u016a813b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=913&originWidth=1899&originalType=binary&ratio=1&rotation=0&showTitle=false&size=159543&status=done&style=none&taskId=u80f0daa1-ab31-4135-bff8-c1bfd4b38a7&title=&width=1899)
ä¸éœ€è¦åšæ›´å¤šçš„è®¾ç½®å¯ä»¥ç›´æ¥ç‚¹å‡»`Deploy`å¼€å§‹éƒ¨ç½²ï¼š
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2373519/1668517914689-c064ba51-16ba-4b96-89a2-bd6f24ca80b1.png#averageHue=%23faf9f9&clientId=ub1b69c7f-1eb7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=867&id=u8208017e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=867&originWidth=1898&originalType=binary&ratio=1&rotation=0&showTitle=false&size=70941&status=done&style=none&taskId=u6c4a1c21-3552-402d-95d9-5b0c88be359&title=&width=1898)
éƒ¨ç½²å®Œæˆåå°±å¾—åˆ°äº†é¡¹ç›®çš„è®¿é—®åœ°å€ï¼Œå¦‚åˆ†é…ç»™æˆ‘è¿™ä¸ªé¡¹ç›®çš„[github-readme-recent-article.vercel.app](https://github-readme-recent-article.vercel.app/)ï¼š
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2373519/1668518010643-27956853-cf92-4190-ae4e-aaff41fbdf88.png#averageHue=%23fafafa&clientId=ub1b69c7f-1eb7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=910&id=ua9f42205&margin=%5Bobject%20Object%5D&name=image.png&originHeight=910&originWidth=1902&originalType=binary&ratio=1&rotation=0&showTitle=false&size=87084&status=done&style=none&taskId=u15a85ed6-84a4-4b17-89c9-83df22274fa&title=&width=1902)
é€šè¿‡`get`å½¢å¼è·å–åºå·`0`æ‰€å¯¹åº”çš„æ–‡ç« å¡ç‰‡ï¼š
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2373519/1668518118795-49af7fd7-2f1a-4048-acc0-2763ccfaa195.png#averageHue=%23fcfbfb&clientId=ub1b69c7f-1eb7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=356&id=u41d3512f&margin=%5Bobject%20Object%5D&name=image.png&originHeight=356&originWidth=913&originalType=binary&ratio=1&rotation=0&showTitle=false&size=28634&status=done&style=none&taskId=uaf773501-f3b8-4f5e-b678-5bc17b15b1a&title=&width=913)
## 4. æ›´æ–°Githubä¸»é¡µï¼š
> åŠ å…¥å¦‚ä¸‹çš„å†…å®¹æ¥è·å–è¿‘3ç¯‡å†™çš„åšå®¢çš„å¡ç‰‡å§~

```markdown
#### ğŸš€ è¿‘æœŸç¬”è®°

<a target="_blank" href="https://it200.cn/">
  <img src="https://github-readme-recent-article.vercel.app/blog/0">
</a>

<a target="_blank" href="https://it200.cn/">
  <img src="https://github-readme-recent-article.vercel.app/blog/1">
</a>

<a target="_blank" href="https://it200.cn/">
  <img src="https://github-readme-recent-article.vercel.app/blog/2">
</a>
```
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2373519/1668518321172-193dc039-21fe-4539-8736-ce35ef33225b.png#averageHue=%23fbfafa&clientId=ub1b69c7f-1eb7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=765&id=u8747c51d&margin=%5Bobject%20Object%5D&name=image.png&originHeight=765&originWidth=905&originalType=binary&ratio=1&rotation=0&showTitle=false&size=94288&status=done&style=none&taskId=u95b7809b-2842-49b5-a11a-2f1195fc998&title=&width=905)
## 3. æ€»ç»“
ä½¿ç”¨äº†`120`è¡Œå·¦å³çš„ä»£ç å°±å®ç°äº†è¿™ä¸ªæ–‡ç« å¡ç‰‡åœ¨Githubä¸»é¡µçš„å±•ç¤ºï¼Œå®Œæ•´çš„ä»£ç å·²ç»ä¸Šä¼ è‡³Githubï¼Œæ¬¢è¿ä½ ä¹Ÿå°è¯•ä¸€ä¸‹è¿™ä¸ªå°å·§çš„åŠŸèƒ½~
> æœ¬æ–‡é¡¹ç›®å·²æ¨é€è‡³GitHubï¼Œæ¬¢è¿å…‹éš†æ¼”ç¤ºï¼š`git clone git@github.com:OSpoon/github-readme-recent-article.git`


---

**å¦‚æœçœ‹å®Œè§‰å¾—æœ‰æ”¶è·ï¼Œæ¬¢è¿ç‚¹èµã€è¯„è®ºã€åˆ†äº«æ”¯æŒä¸€ä¸‹ã€‚ä½ çš„æ”¯æŒå’Œè‚¯å®šï¼Œæ˜¯æˆ‘åšæŒå†™ä½œçš„åŠ¨åŠ›~**
æœ€åå¯ä»¥å…³æ³¨æˆ‘@å°é‘«åŒå­¦ã€‚æ¬¢è¿[ç‚¹æ­¤æ‰«ç åŠ æˆ‘](https://it200.cn/)äº¤æµï¼Œå…±åŒè¿›æ­¥ï¼ˆè¿˜å¯ä»¥å¸®ä½ **fix**ğŸ›ï¼‰~
