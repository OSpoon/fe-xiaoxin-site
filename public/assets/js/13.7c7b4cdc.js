(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{403:function(s,n,t){"use strict";t.r(n);var e=t(2),a=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"title"}),n("p",[s._v("ğŸ’¢ç¬¬ä¸€å‘æ¥è‡ªaliäº‘ï¼Œaliäº‘çš„å‡½æ•°è®¡ç®—FCäº§å“åœ¨ä½¿ç”¨æ¨¡æ¿åˆ›å»ºé¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚ä¸‹å›¾ä¸­çš„æœåŠ¡åå’Œå‡½æ•°åæ¯æ¬¡åˆ›å»ºéƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±æŒ‰é»˜è®¤çš„åˆ›å»ºäº†ï¼Œä½†æ˜¯å¤šæ¬¡åˆ›å»ºä¼šè¦†ç›–å‰ä¸€æ¬¡çš„å†…å®¹ï¼Œæˆ‘å†™å¥½çš„æˆæƒæ¥å£å°±è¢«è¦†ç›–äº†~")])]),s._v(" "),n("h2",{attrs:{id:"å†™ä½œèƒŒæ™¯"}},[s._v("å†™ä½œèƒŒæ™¯ï¼š")]),s._v(" "),n("hr"),s._v(" "),n("p",[n("strong",[s._v("ğŸ’¢ç¬¬ä¸€å‘æ¥è‡ªaliäº‘ï¼Œaliäº‘çš„å‡½æ•°è®¡ç®—FCäº§å“åœ¨ä½¿ç”¨æ¨¡æ¿åˆ›å»ºé¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚ä¸‹å›¾ä¸­çš„æœåŠ¡åå’Œå‡½æ•°åæ¯æ¬¡åˆ›å»ºéƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±æŒ‰é»˜è®¤çš„åˆ›å»ºäº†ï¼Œä½†æ˜¯å¤šæ¬¡åˆ›å»ºä¼šè¦†ç›–å‰ä¸€æ¬¡çš„å†…å®¹ï¼Œæˆ‘å†™å¥½çš„æˆæƒæ¥å£å°±è¢«è¦†ç›–äº†~")]),s._v(" "),n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e8f58239ed754b9c86dad19509ba4d88~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image",alt:"image.png"}}),s._v(" "),n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/070533f10fd44f479ccfa7bdcc044612~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image",alt:"image.png"}}),s._v(" "),n("strong",[s._v("ğŸ’˜aliçš„äº§å“åŸæ¥ä¹Ÿæœ‰è¿™ç§ä½çº§çš„é”™è¯¯ï¼Œä¸ç®¡ä½ æ˜¯äº§å“è®¾è®¡çš„ç¼ºé™·è¿˜æ˜¯ç³»ç»Ÿå¼€å‘çš„ç¼ºé™·ï¼Œè¿™éƒ½æ˜¯è‡´å‘½çš„ï¼Œå› ä¸ºæ­£å¸¸è¿è¡Œçš„æœåŠ¡ä¸¢äº†~")]),s._v(" "),n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dda82a1eda6e4ed199719ad0cdd04f64~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image",alt:"image.png"}}),n("strong",[s._v("ğŸ’¥ç¬¬äºŒå‘æ¥è‡ªWeChatï¼Œåœ¨aliäº‘è°ƒè¯•å¥½çš„ä»£ç ä¸¢å°±ä¸¢äº†å§ï¼Œæˆ‘å°±æ‰“ç®—è¿˜åœ¨aliäº‘ä¸Šå¼€å§‹é‡æ–°æ¥ä¸€éï¼Œé ç€æœç´¢åˆ°çš„ç½‘ç«™è¿˜æ²¡å…³æ‰ï¼Œå°±å†™å®Œäº†ç¬¬äºŒéäº‘ä¸Šçš„ä»£ç ï¼Œæ¥å£æµ‹è¯•å¯ä»¥è¿”å›ä¿¡æ¯ï¼Œä½†æ˜¯ã€æŠ˜ã€‘åœ¨äº†å‰ç«¯wx.configå‡½æ•°çš„æ ¡éªŒé—®é¢˜ä¸Šï¼Œå†™è¿‡çš„éƒ½çŸ¥é“æ–‡æ¡£æä¾›äº†æ ¡éªŒå¤±è´¥çš„æ’æŸ¥è¿‡ç¨‹ï¼Œä½ è¦æ˜¯èƒ½æŒ‰è¿™ä¸ªè§£å†³äº†ï¼Œå¾®ä¿¡å¼€å‘ç¤¾åŒºå°±ä¸ä¼šæ5k+è¿‘ä¼¼é‡å¤çš„é—®é¢˜è€Œæ²¡æœ‰ç»“æœäº†~")]),s._v(" "),n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4ee6e328de2f49679de8cbc24c706aa4~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image",alt:"image.png"}}),n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/86a17cdc3d2747a2baafdd7a87dde886~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image",alt:"image.png"}}),s._v(" ğŸ’¤"),n("strong",[s._v("å†™ä»£ç å°±åº”è¯¥ã€æœ‰å§‹æœ‰ç»ˆã€‘æˆ‘è¿˜æ˜¯åœ¨æœ¬åœ°æ­å»ºå…¨å¥—ç¯å¢ƒæ¥å†æä¸€éè¯•è¯•çœ‹ï¼Œè¯·ç†Ÿæ‚‰ä¸‹é¢å„ä¸ªåœ°å€çš„å¿«é€Ÿä¸Šæ‰‹æ–‡æ¡£æ¥æ­å»ºç¯å¢ƒ~")])]),s._v(" "),n("ol",[n("li",[n("strong",[s._v("æœåŠ¡ç«¯ï¼š")]),n("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fwww.eggjs.org%2Fzh-CN%2Fintro%2Fquickstart",title:"https://www.eggjs.org/zh-CN/intro/quickstart",target:"_blank",rel:"noopener noreferrer"}},[n("strong",[s._v("Egg.js")]),n("OutboundLink")],1)]),s._v(" "),n("li",[n("strong",[s._v("å‰ç«¯ï¼š")]),n("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fstaging-cn.vuejs.org%2F",title:"https://staging-cn.vuejs.org/",target:"_blank",rel:"noopener noreferrer"}},[n("strong",[s._v("Vue3")]),n("OutboundLink")],1)]),s._v(" "),n("li",[n("strong",[s._v("å¾®ä¿¡ï¼š")]),n("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fmp.weixin.qq.com%2Fdebug%2Fcgi-bin%2Fsandboxinfo%3Faction%3Dshowinfo%26t%3Dsandbox%2Findex",title:"https://mp.weixin.qq.com/debug/cgi-bin/sandboxinfo?action=showinfo&t=sandbox/index",target:"_blank",rel:"noopener noreferrer"}},[n("strong",[s._v("å…¬ä¼—å·æµ‹è¯•å¹³å°")]),n("OutboundLink")],1)]),s._v(" "),n("li",[n("strong",[s._v("å†…ç½‘ç©¿é€ï¼š")]),n("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fnatapp.cn%2F",title:"https://natapp.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Natapp"),n("OutboundLink")],1)])]),s._v(" "),n("h2",{attrs:{id:"ä»£ç å®æ“"}},[s._v("ä»£ç å®æ“ï¼š")]),s._v(" "),n("hr"),s._v(" "),n("h3",{attrs:{id:"ç¬¬ä¸€æ­¥-å¯åŠ¨natapp"}},[s._v("ç¬¬ä¸€æ­¥ï¼Œå¯åŠ¨Natappï¼š")]),s._v(" "),n("ol",[n("li",[s._v("åœ¨natappå¹³å°æ‰¾åˆ°å…è´¹æä¾›çš„éš§é“è¿›è¡Œé…ç½®æ›´æ”¹ï¼šå°†"),n("code",[s._v("7001")]),s._v("ç«¯å£è¿›è¡Œæ˜ å°„ï¼Œ"),n("code",[s._v("7001")]),s._v("æ˜¯eggjsé¡¹ç›®é»˜è®¤ç«¯å£ï¼›")]),s._v(" "),n("li",[s._v("åœ¨ä¸‹è½½å¥½natappå®¢æˆ·ç«¯ï¼ˆwindowï¼‰ååœ¨å®¢æˆ·ç«¯åŒçº§ç›®å½•ç¼–å†™"),n("code",[s._v("config.ini")]),s._v("é…ç½®æ–‡ä»¶å¹¶å°†å¹³å°æä¾›çš„å…è´¹éš§é“é”®å…¥åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œæ ¼å¼åŒï¼š"),n("code",[s._v("authtoken=<your authtoken>")]),s._v("ï¼›")]),s._v(" "),n("li",[s._v("é…ç½®ååŒå‡»å®¢æˆ·ç«¯å¦‚ä¸‹å›¾å°±å¯åŠ¨æ­£å¸¸äº†ï¼Œå…è´¹éš§é“çš„IPéšæ—¶å¯èƒ½ä¼šå˜ï¼Œå¼€å‘ä¸­éœ€è¦æ³¨æ„~"),n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/12435edaf44b4b77a87a3453c87d2233~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image",alt:"image.png"}})])]),s._v(" "),n("h3",{attrs:{id:"ç¬¬äºŒæ­¥-å…ˆæå‰ç«¯éƒ¨åˆ†"}},[s._v("ç¬¬äºŒæ­¥ï¼Œå…ˆæå‰ç«¯éƒ¨åˆ†ï¼š")]),s._v(" "),n("ol",[n("li",[s._v("ä½¿ç”¨"),n("code",[s._v("yarn create vite")]),s._v("åˆ›å»ºä¸€ä¸ªå‰ç«¯é¡¹ç›®ï¼Œç”¨ç€é¡ºæ‰‹å°±è¡Œï¼Œä¸ºçš„å°±æ˜¯"),n("strong",[s._v("å¿«~")])]),s._v(" "),n("li",[s._v("å®‰è£…"),n("code",[s._v("axios")]),s._v("æ¥å‘é€æˆæƒä¿¡æ¯è·å–è¯·æ±‚ï¼›")]),s._v(" "),n("li",[s._v("å¾®ä¿¡çš„JS-SDKæ—¢ç„¶æ²¡çœ‹åˆ°å®˜æ–¹æä¾›ä¾èµ–åŒ…é‚£å°±ç”¨é…ç½®åˆ°index.htmlï¼Œ"),n("code",[s._v('<script src="[http://res2.wx.qq.com/open/js/jweixin-1.6.0.js"><\/script>](http://res2.wx.qq.com/open/js/jweixin-1.6.0.js"><\/script>)')])]),s._v(" "),n("li",[s._v("åœ¨æ¨¡æ¿ä¸­æˆ‘ä»¬ç¼–å†™å°‘é‡çš„ä»£ç æ¥æ˜¾ç¤ºæˆæƒçš„çŠ¶æ€ï¼š")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<template>\n  <h3 v-if="message">{{ message }}</h3>\n  <h3 v-else>\n    ç‚¹å‡»å³ä¸Šè§’=>åˆ†äº«ç»™æœ‹å‹\n    <h5>{{ status }}</h5>\n  </h3>\n</template>\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("ol",{attrs:{start:"5"}},[n("li",[s._v("æˆ‘ä»¬é€šè¿‡"),n("code",[s._v("axios")]),s._v("è·å–"),n("code",[s._v("/signature")]),s._v("æ¥å£çš„æ•°æ®ï¼Œä¸ºäº†é¿å…"),n("strong",[s._v("url")]),s._v("å‚æ•°çš„ä¼ é€’å¯èƒ½å­˜åœ¨ç¼–ç çš„é—®é¢˜ï¼Œé‚£æˆ‘ä»¬ç¨ååœ¨è®¾è®¡"),n("code",[s._v("/signature")]),s._v("æ¥å£çš„æ—¶å€™"),n("strong",[s._v("url")]),s._v("å‚æ•°é€šè¿‡"),n("strong",[s._v("body")]),s._v("ä¼ é€’æ¥é¿å…ï¼Œæˆæƒæ•°æ®æ‹¿åˆ°åå°±æ˜¯"),n("code",[s._v("wx.config")]),s._v("æ‰§è¡ŒéªŒè¯äº†~")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<script setup>\n  import { ref } from "vue";\nimport axios from "axios";\nconst message = ref("");\nconst status = ref("");\naxios\n  .post(`http://t2fzbb.natappfree.cc/signature`, {\n  url: location.href.split("#")[0],\n})\n  .then((res) => {\n  const { appId, nonceStr, signature, timestamp } = res.data;\n  console.log("[ res ] >", appId, nonceStr, signature, timestamp);\n  wx.config({\n    debug: true, // å¼€å¯è°ƒè¯•æ¨¡å¼,è°ƒç”¨çš„æ‰€æœ‰ api çš„è¿”å›å€¼ä¼šåœ¨å®¢æˆ·ç«¯ alert å‡ºæ¥ï¼Œè‹¥è¦æŸ¥çœ‹ä¼ å…¥çš„å‚æ•°ï¼Œå¯ä»¥åœ¨ pc ç«¯æ‰“å¼€ï¼Œå‚æ•°ä¿¡æ¯ä¼šé€šè¿‡ log æ‰“å‡ºï¼Œä»…åœ¨ pc ç«¯æ—¶æ‰ä¼šæ‰“å°ã€‚\n    appId, // å¿…å¡«ï¼Œå…¬ä¼—å·çš„å”¯ä¸€æ ‡è¯†\n    timestamp, // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„æ—¶é—´æˆ³\n    nonceStr, // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„éšæœºä¸²\n    signature, // å¿…å¡«ï¼Œç­¾å\n    jsApiList: ["updateAppMessageShareData"], // å¿…å¡«ï¼Œéœ€è¦ä½¿ç”¨çš„ JS æ¥å£åˆ—è¡¨\n  });\n  wx.error((res) => {\n    message.value = res.errMsg;\n  });\n  wx.ready(() => {\n    wx.checkJsApi({\n      jsApiList: ["updateAppMessageShareData"], // éœ€è¦æ£€æµ‹çš„ JS æ¥å£åˆ—è¡¨ï¼Œæ‰€æœ‰ JS æ¥å£åˆ—è¡¨è§é™„å½•2,\n      success: (res) => {\n        wx.updateAppMessageShareData({\n          title: "æˆ‘çš„æ˜é‡‘", // åˆ†äº«æ ‡é¢˜\n          desc: "æˆ‘åœ¨æ˜é‡‘è¾“å‡ºå‰ç«¯çŸ¥è¯†~", // åˆ†äº«æè¿°\n          link: "https://juejin.cn/user/3966693685871694", // åˆ†äº«é“¾æ¥ï¼Œè¯¥é“¾æ¥åŸŸåæˆ–è·¯å¾„å¿…é¡»ä¸å½“å‰é¡µé¢å¯¹åº”çš„å…¬ä¼—å· JS å®‰å…¨åŸŸåä¸€è‡´\n          imgUrl:\n          "https://p9-passport.byteacctimg.com/img/user-avatar/71ca4682501063257d8413ff726105a0~300x300.images", // åˆ†äº«å›¾æ ‡\n          success: function () {\n            status.value = "è®¾ç½®æˆåŠŸ";\n          },\n        });\n      },\n    });\n  });\n});\n<\/script>\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br")])]),n("p",[s._v("æœ€ç»ˆæˆ‘ä»¬è¦åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·çš„å…¬ä¼—å°çœ‹åˆ°ä¸€å †"),n("strong",[s._v("ok")]),s._v("å°±è¯´æ˜å¯ä»¥äº†~ "),n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3db833b2847247de8b631921a075f377~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image",alt:"image.png"}})]),s._v(" "),n("h3",{attrs:{id:"ç¬¬ä¸‰æ­¥-ç¼–å†™æœåŠ¡ç«¯æ¥å£"}},[s._v("ç¬¬ä¸‰æ­¥ï¼Œç¼–å†™æœåŠ¡ç«¯æ¥å£ï¼š")]),s._v(" "),n("p",[s._v("ğŸ¤£åœ¨å¼€å§‹å‰æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¾®ä¿¡çš„å„ç§"),n("strong",[s._v("ç¥¨æ®")]),s._v("éƒ½éœ€è¦æˆ‘ä»¬è‡ªå·±åšç¼“å­˜å¤„ç†ï¼Œä»…åœ¨è¶…æ—¶åå†åˆ·æ–°ï¼Œè¦ä¸ä¼šé‡åˆ°è°ƒç”¨æ¬¡æ•°è¶…é™åˆ¶çš„éº»çƒ¦ï¼ŒæœåŠ¡ç«¯ç¼“å­˜"),n("strong",[s._v("ç¥¨æ®")]),s._v("æˆ‘æœ€å…ˆæƒ³åˆ°çš„æ˜¯"),n("strong",[s._v("Redis")]),s._v("ï¼Œä½†æ˜¯å¤šä¸€ä»½é…ç½®è¿˜æ˜¯æŒºéº»çƒ¦çš„ï¼Œåæ¥æƒ³åˆ°çš„æ˜¯"),n("strong",[s._v("è¯»å†™æ–‡ä»¶")]),s._v("ï¼Œæˆ‘åœ¨ã€aliäº‘ã€‘çš„ä¸¤æ¬¡å°±æ˜¯é€šè¿‡è¯»å†™æ–‡ä»¶æ¥å®ç°çš„ï¼Œæ¯•ç«Ÿæ˜¯Demoï¼Œæ•ˆç‡é åå‘—~ ğŸ˜‹æœ€åæˆ‘æƒ³åˆ°çš„æ˜¯æœåŠ¡è¿è¡Œåæˆ‘å¯ä»¥ä½¿ç”¨å…¨å±€å¯¹è±¡æ¥ç¼“å­˜æ•°æ®å‘€ï¼Œå¹¶ä¸éœ€è¦å€ŸåŠ©é¢å¤–çš„æ¸ é“æ¥å®ç°ï¼Œæˆ‘ä»¬ä»¥å‰çš„"),n("strong",[s._v("å•åˆ©æ¨¡å¼")]),s._v("å°±æ˜¯åœ¨éœ€è¦çš„æ—¶å€™å†å®ä¾‹åŒ–å¯¹è±¡çš„å‘€ğŸ’—")]),s._v(" "),n("h4",{attrs:{id:"ç¼–å†™ä¸ªæ¥å£çš„controllerå±‚"}},[s._v("ç¼–å†™ä¸ªæ¥å£çš„Controllerå±‚ï¼š")]),s._v(" "),n("ol",[n("li",[s._v("checkOriginï¼šç”¨æ¥åœ¨å…¬ä¼—å·æµ‹è¯•å¹³å°å‘èµ·éªŒè¯æœåŠ¡çš„è¯·æ±‚æ¥éªŒè¯æ•°æ®æ¥æºï¼›")]),s._v(" "),n("li",[s._v("tokenï¼šç”¨æ¥è·å–"),n("code",[s._v("access_token")]),s._v("ï¼Œæˆ‘ä¼šåœ¨serverå±‚åš"),n("code",[s._v("access_token")]),s._v("çš„"),n("strong",[s._v("å¯¹è±¡ç¼“å­˜")]),s._v("ï¼›")]),s._v(" "),n("li",[s._v("ticketï¼šç”¨æ¥è·å–"),n("code",[s._v("ticket")]),s._v("ï¼Œè¿™ä¸ªä¹Ÿä¼šåœ¨serverå±‚åš"),n("strong",[s._v("å¯¹è±¡ç¼“å­˜")]),s._v("ï¼›")]),s._v(" "),n("li",[s._v("signatureï¼šç”¨æ¥ç”ŸæˆéªŒç­¾ï¼Œå¹¶è¿”å›"),n("strong",[s._v("wx.config")]),s._v("éœ€è¦é…ç½®æ•°æ®ï¼ŒæœŸé—´éœ€è¦ä¸€æ¬¡è·å–"),n("code",[s._v("access_token")]),s._v("å’Œ"),n("code",[s._v("ticket")]),s._v("ï¼Œå¯ä»¥çœ‹åˆ°"),n("code",[s._v("url")]),s._v("æˆ‘ä»¬æ˜¯é€šè¿‡"),n("code",[s._v("body")]),s._v("è·å–çš„ã€‚")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import { Controller } from 'egg';\n\nexport default class HomeController extends Controller {\n  \n  public async checkOrigin() {\n    const { ctx } = this;\n    const { signature, timestamp, nonce, echostr } = ctx.query;\n    const result = await ctx.service.weChat.checkSignature(\n      signature,\n      timestamp,\n      nonce,\n    );\n    ctx.body = result ? echostr : '';\n  }\n\n  public async token() {\n    const { ctx } = this;\n    ctx.body = await ctx.service.weChat.getToken();\n  }\n\n  public async ticket() {\n    const { ctx } = this;\n    ctx.body = await ctx.service.weChat.getTicket();\n  }\n\n  public async signature() {\n    const { ctx } = this;\n    const { url } = ctx.request.body;\n    console.log('[ url ] >', url);\n    ctx.body = await ctx.service.weChat.genSignature(url);\n  }\n}\n\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br")])]),n("h4",{attrs:{id:"ç¼–å†™serviceçš„ç¬¬ä¸€ä¸ªå‡½æ•°checksignature"}},[s._v("ç¼–å†™Serviceçš„ç¬¬ä¸€ä¸ªå‡½æ•°checkSignatureï¼š")]),s._v(" "),n("p",[s._v("ğŸ’•éœ€è¦æ¥å£å¾®ä¿¡å¹³å°å‘é€æ¥çš„"),n("strong",[s._v("signature")]),s._v("ï¼Œ"),n("strong",[s._v("timestamp")]),s._v("ï¼Œ"),n("strong",[s._v("nonce")]),s._v("ï¼Œåœ¨æµ‹è¯•å¹³å°æˆ‘ä»¬é…ç½®äº†ä¸ªè‡ªå®šä¹‰çš„TOKENï¼Œæˆ‘ä»¬éœ€è¦å°†ã€TOKEN, timestamp, nonceã€‘è¿›è¡Œ"),n("strong",[s._v("sort")]),s._v("æ’åºåæ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶ä½¿ç”¨"),n("strong",[s._v("SHA1")]),s._v("åŠ å¯†ç®—æ³•ï¼ˆè¿™é‡Œä½¿ç”¨çš„crypto-jsä¾èµ–ï¼‰æ¥ç”Ÿæˆæˆ‘ä»¬è‡ªå·±çš„"),n("strong",[s._v("éªŒç­¾")]),s._v("ï¼Œå°†æˆ‘ä»¬çš„ç”Ÿæˆçš„"),n("strong",[s._v("éªŒç­¾")]),s._v("å’Œå¹³å°å‘é€è¿‡æ¥çš„"),n("strong",[s._v("signature")]),s._v("å¯¹æ¯”å¹¶å°†ç»“æœè¿”å›åˆ°Controllerï¼Œå¹¶å“åº”å¾®ä¿¡æµ‹è¯•å¹³å°~")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("  public async checkSignature(\n    signature: string,\n    timestamp: string,\n    nonce: string,\n  ) {\n    const own = SHA1([ TOKEN, timestamp, nonce ].sort().join('')).toString();\n    return own === signature;\n  }\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h4",{attrs:{id:"ç¼–å†™serviceçš„ç¬¬äºŒä¸ªå‡½æ•°gettoken"}},[s._v("ç¼–å†™Serviceçš„ç¬¬äºŒä¸ªå‡½æ•°getTokenï¼š")]),s._v(" "),n("ol",[n("li",[s._v("æˆ‘åœ¨æœåŠ¡çš„æœ€å¼€å§‹å®šä¹‰äº†ä¸€ä¸ª"),n("strong",[s._v("cache")]),s._v("å¯¹è±¡æ¥ç¼“å­˜"),n("strong",[s._v("token")]),s._v("ï¼›")]),s._v(" "),n("li",[s._v("å½“"),n("strong",[s._v("token")]),s._v("ä¸­çš„"),n("code",[s._v("access_token")]),s._v("å­—æ®µä¸å­˜åœ¨æ—¶å°±éœ€è¦ä½¿ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­çš„"),n("code",[s._v("curl")]),s._v("æ¥å‘èµ·è¯·æ±‚è·å–ä¸€ä»½æ–°çš„"),n("code",[s._v("access_token")]),s._v("æ•°æ®ï¼›")]),s._v(" "),n("li",[s._v("åœ¨æ‹¿åˆ°æ–°æ•°æ®åé€šè¿‡"),n("code",[s._v("Date.now() + expires_in * 1000")]),s._v("å¾—åˆ°ä¸€ä¸ªå¤±æ•ˆçš„æ—¶é—´å¹¶èµ‹å€¼ç»™"),n("code",[s._v("last_time")]),s._v("ï¼›")]),s._v(" "),n("li",[s._v("å½“å‰çš„"),n("code",[s._v("Date.now()")]),s._v("å¤§äºå­˜å‚¨çš„"),n("code",[s._v("last_time")]),s._v("æ—¶éœ€è¦å†æ¬¡åˆ·æ–°"),n("code",[s._v("access_token")]),s._v("ã€‚")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const cache: {\n  token: {\n    access_token: string | undefined;\n    expires_in: number;\n    last_time: number;\n  };\n} = {\n  token: {\n    access_token: undefined,\n    expires_in: 0,\n    last_time: 0,\n  }\n};\n\npublic async getToken() {\n  const { ctx } = this;\n  const request = async () => {\n    const { data } = await ctx.curl(URL_TOKEN, { dataType: 'json' });\n    const { access_token, expires_in } = data;\n    console.log('[ token data ] >', data);\n    cache.token = {\n      access_token,\n      expires_in,\n      last_time: Date.now() + expires_in * 1000,\n    };\n  };\n  if (!cache.token.access_token) {\n    console.log('[ token è¿˜æ²¡æœ‰~ ] ');\n    await request();\n  } else {\n    if (Date.now() > cache.token.last_time) {\n      console.log('[ token è¶…æ—¶äº† ] ');\n      await request();\n    }\n  }\n  return cache.token;\n}\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br")])]),n("h4",{attrs:{id:"ç¼–å†™serviceçš„ç¬¬ä¸‰ä¸ªå‡½æ•°getticket"}},[s._v("ç¼–å†™Serviceçš„ç¬¬ä¸‰ä¸ªå‡½æ•°getTicketï¼š")]),s._v(" "),n("p",[n("strong",[s._v("ğŸ¤–getTicket")]),s._v("å’Œ"),n("strong",[s._v("getToken")]),s._v("çš„ç¼“å­˜é€»è¾‘ä¸€è‡´ï¼ŒåŒºåˆ«åœ¨äºgetTicketå‘èµ·è¯·æ±‚æ—¶éœ€è¦æºå¸¦"),n("code",[s._v("access_token")]),s._v("ï¼Œå…¶å®ƒç›´æ¥çœ‹ä»£ç ~")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const cache: {\n  token: {\n    access_token: string | undefined;\n    expires_in: number;\n    last_time: number;\n  };\n  ticket: {\n    ticket: string | undefined;\n    expires_in: number;\n    last_time: number;\n  };\n} = {\n  token: {\n    access_token: undefined,\n    expires_in: 0,\n    last_time: 0,\n  },\n  ticket: {\n    ticket: undefined,\n    expires_in: 0,\n    last_time: 0,\n  },\n};\n\npublic async getTicket() {\n  const { ctx } = this;\n  const request = async () => {\n    const { access_token } = await this.getToken();\n    const { data } = await ctx.curl(URL_TICKET, {\n      dataType: 'json',\n      method: 'GET',\n      data: {\n        access_token,\n      },\n    });\n    const { ticket, expires_in } = data;\n    console.log('[ ticket data ] >', data);\n    cache.ticket = {\n      ticket,\n      expires_in,\n      last_time: Date.now() + expires_in * 1000,\n    };\n  };\n  if (!cache.ticket.ticket) {\n    console.log('[ ticket è¿˜æ²¡æœ‰~ ] ');\n    await request();\n  } else {\n    if (Date.now() > cache.ticket.last_time) {\n      console.log('[ ticket è¶…æ—¶äº† ] ');\n      await request();\n    }\n  }\n  return cache.ticket;\n}\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br")])]),n("h4",{attrs:{id:"ç¼–å†™serviceçš„æœ€åä¸€ä¸ªå‡½æ•°gensignature"}},[s._v("ç¼–å†™Serviceçš„æœ€åä¸€ä¸ªå‡½æ•°genSignatureï¼š")]),s._v(" "),n("ol",[n("li",[s._v("è°ƒç”¨ä¸Šä¸€æ¬¡å‡½æ•°å¾—åˆ°"),n("code",[s._v("jsapi_ticket")]),s._v("ï¼›")]),s._v(" "),n("li",[s._v("ç”Ÿæˆéšæœºå­—ç¬¦ä¸²noncestrï¼š"),n("code",[s._v("Math.random().toString(36).substr(2, 15)")]),s._v("ï¼›")]),s._v(" "),n("li",[s._v("ç”Ÿæˆæ—¶é—´æˆ³timestampï¼š"),n("code",[s._v("Date.now()")]),s._v("ï¼›")]),s._v(" "),n("li",[s._v("~éªŒç­¾ç”Ÿæˆåœ¨å®˜ç½‘æè¿°ä¸­éœ€è¦ï¼š~\n"),n("ol",[n("li",[s._v("~å¯¹æ‰€æœ‰å¾…ç­¾åå‚æ•°æŒ‰ç…§å­—æ®µåçš„ASCII ç ä»å°åˆ°å¤§æ’åºï¼ˆå­—å…¸åºï¼‰ï¼›~")]),s._v(" "),n("li",[s._v("~ä½¿ç”¨ URL é”®å€¼å¯¹çš„æ ¼å¼ï¼ˆå³key1=value1&key2=value2â€¦ï¼‰æ‹¼æ¥æˆå­—ç¬¦ä¸²string1ï¼›~")]),s._v(" "),n("li",[s._v("~éœ€è¦æ³¨æ„çš„æ˜¯æ‰€æœ‰å‚æ•°åå‡ä¸ºå°å†™å­—ç¬¦ï¼›~")]),s._v(" "),n("li",[s._v("~å¯¹string1ä½œsha1åŠ å¯†ï¼Œå­—æ®µåå’Œå­—æ®µå€¼éƒ½é‡‡ç”¨åŸå§‹å€¼ï¼Œä¸è¿›è¡ŒURL è½¬ä¹‰ï¼›~")])])]),s._v(" "),n("li",[s._v("å®˜ç½‘çš„æè¿°å¤ªéº»çƒ¦äº†ï¼Œæˆ‘ä»¬ç›´æ¥æŒ‰ASCII ç ä»å°åˆ°å¤§å‡­å€Ÿæ¨¡æ¿å­—ç¬¦ä¸²ï¼Œæ’åºã€é”®å€¼å¯¹æ ¼å¼ã€å¤§å°å†™è¿™äº›æ³¨æ„äº‹é¡¹å°±éƒ½çœäº†ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‰ç¬¬ä¸€ä¸ªå‡½æ•°ä¸­åšä¸€æ¬¡"),n("code",[s._v("SHA1")]),s._v("åŠ å¯†å¹¶"),n("code",[s._v("toString()")]),s._v("å¾—åˆ°éªŒç­¾å­—ç¬¦ä¸²å°±å¯ä»¥le~")]),s._v(" "),n("li",[s._v("ç»„è£…å‰ç«¯"),n("code",[s._v("wx.config")]),s._v("ä¸­éœ€è¦çš„å››ä¸ªå‚æ•°å¹¶è¿”å›~")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("public async genSignature(url: string) {\n  const { ticket: jsapi_ticket } = await this.getTicket();\n  const noncestr = Math.random().toString(36).substr(2, 15);\n  const timestamp = Date.now();\n  const signature = SHA1(\n    `jsapi_ticket=${jsapi_ticket}&noncestr=${noncestr}&timestamp=${timestamp}&url=${url}`,\n  ).toString();\n  return {\n    appId: APPID,\n    nonceStr: noncestr,\n    timestamp,\n    signature,\n  };\n}\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h2",{attrs:{id:"å¾®ä¿¡æµ‹è¯•å·å¹³å°"}},[s._v("å¾®ä¿¡æµ‹è¯•å·å¹³å°ï¼š")]),s._v(" "),n("hr"),s._v(" "),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/baa9dcffa9ef46ccb74793dc65cffdcf~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image",alt:"uTools_1658766397916.png"}})]),s._v(" "),n("h3",{attrs:{id:"æ¥å£é…ç½®ä¿¡æ¯"}},[s._v("æ¥å£é…ç½®ä¿¡æ¯ï¼š")]),s._v(" "),n("p",[s._v("ğŸ’¥éœ€è¦è°ƒç”¨æˆ‘ä»¬çš„"),n("code",[s._v("/checkOrigin")]),s._v("ï¼ŒTokenå­—æ®µä¸ºæˆ‘ä»¬è‡ªå®šä¹‰çš„å†…å®¹ï¼Œå’ŒæœåŠ¡ä¸­éªŒè¯ç­¾åæ—¶ä½¿ç”¨çš„ä¸€è‡´å°±å¯ä»¥äº†ï¼Œé…ç½®æäº¤åä¼šå‘æˆ‘ä»¬çš„æœåŠ¡å‘èµ·"),n("strong",[s._v("GET")]),s._v("è¯·æ±‚ï¼Œå¹¶é€šè¿‡queryæºå¸¦å‚æ•°ç»™æˆ‘ä»¬ï¼Œå½“æˆ‘ä»¬éªŒè¯é€šè¿‡åéœ€è¦å°†å¹³å°ä¼ é€’è¿‡æ¥çš„éšæœºå­—ç¬¦è¿”å›å›å»ä»£è¡¨æˆ‘ä»¬éªŒè¯é€šè¿‡~")]),s._v(" "),n("h3",{attrs:{id:"jsæ¥å£å®‰å…¨åŸŸå"}},[s._v("JSæ¥å£å®‰å…¨åŸŸåï¼š")]),s._v(" "),n("p",[s._v("ğŸ’¥è¿™ä¸ªå› ä¸ºæˆ‘ä»¬åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­è°ƒè¯•å‰ç«¯é¡µé¢ç”¨çš„"),n("code",[s._v("localhost")]),s._v("ï¼Œæ‰€ä»¥éœ€è¦å°†"),n("code",[s._v("localhost")]),s._v("é…ç½®åœ¨è¿™ä¸ªåœ°æ–¹~")]),s._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fdevelopers.weixin.qq.com%2Fcommunity%2Fdevelop%2Fdoc%2F000ec62bb040f84b884e3818f55c00",title:"https://developers.weixin.qq.com/community/develop/doc/000ec62bb040f84b884e3818f55c00",target:"_blank",rel:"noopener noreferrer"}},[s._v("æœªè§£å†³ å¾®ä¿¡å¼€æ”¾ç¤¾åŒº wx.config æç¤º invalid signature ï¼Ÿ"),n("OutboundLink")],1)])]),s._v(" "),n("h2",{attrs:{id:"æ€»ç»“"}},[s._v("æ€»ç»“ï¼š")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("ğŸ’¯ä»£ç çš„ç¼–å†™è¿˜æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œå°±æ˜¯å’Œè¿™ç§å¤§å¹³å°æ²Ÿé€šæˆæœ¬å¤ªé«˜ï¼Œæ¯æ¬¡ç¼–å†™éƒ½æœ‰æ–°å‘è¦è¸©ï¼Œæœ€åæˆ‘å°†ä»£ç çš„é…ç½®ä¿¡æ¯å‰”é™¤åä¸Šä¼ åˆ°"),n("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FOSpoon%2F",title:"https://github.com/OSpoon/",target:"_blank",rel:"noopener noreferrer"}},[s._v("GitHub"),n("OutboundLink")],1),s._v("ï¼Œéœ€è¦çš„jymå¯ä»¥ä¸‹è½½è·‘è·‘çœ‹~")]),s._v(" "),n("p",[s._v("æˆ‘æ­£åœ¨å‚ä¸æ˜é‡‘æŠ€æœ¯ç¤¾åŒºåˆ›ä½œè€…ç­¾çº¦è®¡åˆ’æ‹›å‹Ÿæ´»åŠ¨ï¼Œ"),n("a",{attrs:{href:"https://juejin.cn/post/7112770927082864653",title:"https://juejin.cn/post/7112770927082864653",target:"_blank",rel:"noopener noreferrer"}},[s._v("ç‚¹å‡»é“¾æ¥æŠ¥åæŠ•ç¨¿"),n("OutboundLink")],1),s._v("ã€‚")]),s._v(" "),n("p",[s._v("æœ¬æ–‡è½¬è‡ª "),n("a",{attrs:{href:"https://juejin.cn/post/7124455454603739166",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://juejin.cn/post/7124455454603739166"),n("OutboundLink")],1),s._v("ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚")])])}),[],!1,null,null,null);n.default=a.exports}}]);