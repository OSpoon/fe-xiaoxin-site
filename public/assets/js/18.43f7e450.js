(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{410:function(e,n,s){"use strict";s.r(n);var t=s(2),a=Object(t.a)({},(function(){var e=this,n=e._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"title"}),n("p",[e._v("åœ¨ä¸Šä¸€ç¯‡"),n("a",{attrs:{href:"https://juejin.cn/post/7129535563639554085",title:"https://juejin.cn/post/7129535563639554085",target:"_blank",rel:"noopener noreferrer"}},[e._v("ã€å…¥é—¨ã€‘ä½ è¿Babeléƒ½ä¸ä¼šé…ï¼Ÿé‚£æ’ä»¶ä¸æˆä¹±è£…äº†"),n("OutboundLink")],1),e._v("ä¸­è®²è¿°äº† babel çš„ä½¿ç”¨å’Œæ’ä»¶/é¢„è®¾çš„é…ç½®ï¼Œè¿™ä¸€ç¯‡æˆ‘æƒ³å†™å†™ Babel æ’ä»¶å¼€å‘çš„å­¦ä¹ è¿‡ç¨‹ï¼Œåœ¨ç¿»æ‰¾èµ„æ–™çš„æ—¶å€™å‘ç°çš„è¿™ä¸ªå¯èƒ½å·²ç»è¿‡æ—¶çš„ CLI å·¥å…·ï¼Œ é‚£ä¹ˆå°±è·Ÿéšæˆ‘æ¥å¿«é€Ÿæå®šç¬¬ä¸€ä¸ª Babel æ’ä»¶å§~")])]),e._v(" "),n("h2",{attrs:{id:"_1-å‰è¨€"}},[e._v("1. å‰è¨€")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯"),n("a",{attrs:{href:"https://juejin.cn/user/3966693685871694",title:"https://juejin.cn/user/3966693685871694",target:"_blank",rel:"noopener noreferrer"}},[e._v("å°é‘«åŒå­¦"),n("OutboundLink")],1),e._v("ã€‚ä¸€ä½ä»äº‹è¿‡"),n("strong",[e._v("Androidå¼€å‘")]),e._v("ã€"),n("strong",[e._v("æ··åˆå¼€å‘")]),e._v("ï¼Œç°åœ¨é•¿æœŸä»äº‹"),n("strong",[e._v("å‰ç«¯å¼€å‘")]),e._v("çš„ç¼–ç¨‹çˆ±å¥½è€…ï¼Œ"),n("strong",[e._v("æˆ‘è§‰å¾—åœ¨ç¼–ç¨‹ä¹‹è·¯ä¸Šæœ€é‡è¦çš„æ˜¯çŸ¥è¯†çš„åˆ†äº«ï¼Œæ‰€è°“ä¸‰äººè¡Œå¿…æœ‰æˆ‘å¸ˆ")]),e._v("ã€‚æ‰€ä»¥æˆ‘å¼€å§‹åœ¨ç¤¾åŒºæŒç»­è¾“å‡ºæˆ‘æ‰€äº†è§£åˆ°ã€å­¦ä¹ åˆ°ã€å·¥ä½œä¸­é‡åˆ°çš„å„ç§ç¼–ç¨‹çŸ¥è¯†ï¼Œæ¬¢è¿æœ‰æƒ³æ³•ã€æœ‰åŒæ„Ÿçš„ä¼™ä¼´åŠ æˆ‘"),n("a",{attrs:{href:"https://juejin.cn/pin/7126196941574111262",title:"https://juejin.cn/pin/7126196941574111262",target:"_blank",rel:"noopener noreferrer"}},[e._v("fe-xiaoxin"),n("OutboundLink")],1),e._v("å¾®ä¿¡äº¤æµ~")]),e._v(" "),n("p",[e._v("åœ¨ä¸Šä¸€ç¯‡"),n("a",{attrs:{href:"https://juejin.cn/post/7129535563639554085",title:"https://juejin.cn/post/7129535563639554085",target:"_blank",rel:"noopener noreferrer"}},[e._v("ã€å…¥é—¨ã€‘ä½ è¿Babeléƒ½ä¸ä¼šé…ï¼Ÿé‚£æ’ä»¶ä¸æˆä¹±è£…äº†"),n("OutboundLink")],1),e._v("ä¸­è®²è¿°äº† babel çš„ä½¿ç”¨å’Œæ’ä»¶/é¢„è®¾çš„é…ç½®ï¼Œè¿™ä¸€ç¯‡æˆ‘æƒ³å†™å†™ Babel æ’ä»¶å¼€å‘çš„å­¦ä¹ è¿‡ç¨‹ï¼Œåœ¨ç¿»æ‰¾èµ„æ–™çš„æ—¶å€™å‘ç°çš„è¿™ä¸ªå¯èƒ½å·²ç»è¿‡æ—¶çš„ CLI å·¥å…·ï¼Œ é‚£ä¹ˆå°±è·Ÿéšæˆ‘æ¥å¿«é€Ÿæå®šç¬¬ä¸€ä¸ª Babel æ’ä»¶å§~")]),e._v(" "),n("h2",{attrs:{id:"_2-ç¯å¢ƒ-èµ„æ–™å‡†å¤‡"}},[e._v("2. ç¯å¢ƒ/èµ„æ–™å‡†å¤‡ï¼Ÿ")]),e._v(" "),n("hr"),e._v(" "),n("h3",{attrs:{id:"_2-1-å¿…å¤‡å·¥å…·"}},[e._v("2.1 å¿…å¤‡å·¥å…·ï¼š")]),e._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FOSpoon%2Fgenerator-babel-plugin",title:"https://github.com/OSpoon/generator-babel-plugin",target:"_blank",rel:"noopener noreferrer"}},[n("strong",[e._v("babel-plugin-2")]),n("OutboundLink")],1),e._v("ï¼šæ’ä»¶å¼€å‘å¥—ä»¶ï¼ˆforkè‡ª"),n("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fbabel%2Fgenerator-babel-plugin",title:"https://github.com/babel/generator-babel-plugin",target:"_blank",rel:"noopener noreferrer"}},[e._v("generator-babel-plugin"),n("OutboundLink")],1),e._v("ï¼‰ï¼›")]),e._v(" "),n("li",[n("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fastexplorer.net%2F",title:"https://astexplorer.net/",target:"_blank",rel:"noopener noreferrer"}},[n("strong",[e._v("AST Explorer")]),n("OutboundLink")],1),e._v("ï¼šæŠ½è±¡è¯­æ³•æ ‘åœ¨çº¿åˆ†æï¼›")])]),e._v(" "),n("h3",{attrs:{id:"_2-2-å­¦ä¹ èµ„æ–™"}},[e._v("2.2 å­¦ä¹ èµ„æ–™ï¼š")]),e._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fbabeljs.io%2F",title:"https://babeljs.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("babeljs"),n("OutboundLink")],1),e._v("ï¼›")]),e._v(" "),n("li",[n("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fjamiebuilds%2Fbabel-handbook%2Fblob%2Fmaster%2Ftranslations%2Fzh-Hans%2Fplugin-handbook.md",title:"https://github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("plugin-handbookä¸­æ–‡ç‰ˆ"),n("OutboundLink")],1),e._v("ï¼›")]),e._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/book/6946117847848321055?suid=3966693685871694&source=ios",title:"https://juejin.cn/book/6946117847848321055?suid=3966693685871694&source=ios",target:"_blank",rel:"noopener noreferrer"}},[e._v("Babel æ’ä»¶é€šå…³ç§˜ç±"),n("OutboundLink")],1),e._v("ï¼›")])]),e._v(" "),n("h2",{attrs:{id:"_3-ç¬¬ä¸€ä¸ª-babel-æ’ä»¶"}},[e._v("3. ç¬¬ä¸€ä¸ª Babel æ’ä»¶ï¼š")]),e._v(" "),n("hr"),e._v(" "),n("p",[n("strong",[e._v("å¯¹ä»£ç å—ä¸­ console åœ¨æ‰§è¡Œæ—¶å¯ä»¥è¾“å‡ºæ‰€åœ¨çš„ä»£ç è¡Œæ•°")]),e._v("ï¼Œæˆ‘ä»¬çš„ä¾‹å­ä¹Ÿæ˜¯ COPY è‡ª Babel æ’ä»¶é€šè¿‡ç§˜ç±çš„ç¬¬ä¸€ä¸ªç”¨ä¾‹ï¼Œä¹Ÿæ¨èè¯¦ç»†å»å­¦ä¹ ä¸€ä¸‹~")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("1. npm i -g yo generator-babel-plugin-x\n2. mkdir babel-plugin-clg-insert-line && cd babel-plugin-clg-insert-line\n3. yo babel-plugin-x\n4. è¡¥å……æ’ä»¶ä¿¡æ¯ï¼š\n    ? Plugin Name clg-insert-line\n    ? Description \n    ? GitHub username or organization \n    ? Author's Name \n    ? Author's Email \n    ? Key your keywords (comma to split)\n\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br")])]),n("p",[e._v("æ‰§è¡Œå®Œä¸Šé¢çš„æ­¥éª¤åå°±ç”Ÿæˆäº†ç¬¬ä¸€ä¸ªæ‹¥æœ‰æ ‡å‡†è‡ªè¿°æ–‡æ¡£ã€æµ‹è¯•ç”¨ä¾‹çš„å®Œæ•´æ’ä»¶é¡¹ç›®~")]),e._v(" "),n("h3",{attrs:{id:"_3-1-è¡¥å……è‡ªè¿°æ–‡æ¡£"}},[e._v("3.1 è¡¥å……è‡ªè¿°æ–‡æ¡£ï¼š")]),e._v(" "),n("p",[e._v("CLI ç”Ÿæˆçš„è‡ªè¿°æ–‡æ¡£åŒ…æ‹¬èŒƒä¾‹ã€å®‰è£…ã€ä½¿ç”¨çš„æ–¹å¼ï¼Œæˆ‘ä»¬åªéœ€è¦è¡¥å……éœ€è¦å¤„ç†çš„ä»£ç å’Œå¤„ç†å®Œæˆåçš„ç»“æœä»£ç ~")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("console.log(1);\n\nfunction func() {\n\tconsole.info(2);\n}\n\nexport default class Clazz {\n\tsay() {\n\t\tconsole.debug(3);\n\t}\n\trender() {\n\t\treturn <div>{console.error(4)}</div>;\n\t}\n}\n\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('console.log("line 1", 1);\n\nfunction func() {\n\tconsole.info("line 4", 2);\n}\n\nexport default class Clazz {\n\tsay() {\n\t\tconsole.debug("line 9", 3);\n\t}\n\trender() {\n\t\treturn <div>{console.error("line 12", 4)}</div>;\n\t}\n}\n\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br")])]),n("h3",{attrs:{id:"_3-2-å®Œå–„æµ‹è¯•ç”¨ä¾‹"}},[e._v("3.2 å®Œå–„æµ‹è¯•ç”¨ä¾‹ï¼š")]),e._v(" "),n("p",[e._v("åœ¨æ’ä»¶é¡¹ç›®çš„"),n("code",[e._v("__tests__/fixtures/example")]),e._v("ç›®å½•ä¸‹ç”Ÿæˆäº†ç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œæˆ‘ä»¬éœ€è¦å®Œå–„"),n("code",[e._v("actual.js")]),e._v("å’Œ"),n("code",[e._v("expected.js")]),e._v("ï¼Œå…¶å®ä¹Ÿæ˜¯è‡ªè¿°æ–‡æ¡£ä¸­è¡¥å……çš„ä¸¤å—ä»£ç ï¼Œæˆ‘ä»¬ç¼–å†™åçš„æ’ä»¶åœ¨å¯¹"),n("code",[e._v("actual.js")]),e._v("çš„å†…å®¹å¤„ç†åçš„ç»“æœåº”è¯¥å’Œ"),n("code",[e._v("expected.js")]),e._v("çš„å†…å®¹ä¸€è‡´~")]),e._v(" "),n("h3",{attrs:{id:"_3-3-æŸ¥çœ‹-ast-åŠåˆ†æ"}},[e._v("3.3 æŸ¥çœ‹ AST åŠåˆ†æï¼š")]),e._v(" "),n("p",[n("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fastexplorer.net%2F%23%2Fgist%2F763781d76b0d3f8486cdda748cd7dc39%2F232fda799045f748ecebbb5553589f722d15265b",title:"https://astexplorer.net/#/gist/763781d76b0d3f8486cdda748cd7dc39/232fda799045f748ecebbb5553589f722d15265b",target:"_blank",rel:"noopener noreferrer"}},[e._v("Astexplorer"),n("OutboundLink")],1),e._v("ï¼Œæˆ‘ä»¬åœ¨é€‰ä¸­å…¶ä¸­ä¸€æ¡"),n("code",[e._v("console")]),e._v("è¯­å¥åå³ä¾§çª—å£é«˜äº®äº†ä¸€ç‰‡ "),n("strong",[e._v("ExpressionStatement")]),e._v(" åŒºåŸŸï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯è¢«åŒ…è£¹åœ¨é‡Œé¢çš„è°ƒç”¨è¡¨è¾¾å¼"),n("code",[e._v("CallExpression")]),e._v("ï¼Œè¿™"),n("code",[e._v("CallExpression")]),e._v("é‡Œé¢åŒ…å«è¢«è°ƒç”¨è¡¨è¾¾å¼ï¼ˆ"),n("code",[e._v("callee")]),e._v("ï¼‰ è°ƒç”¨å‚æ•°ï¼ˆ"),n("code",[e._v("arguments")]),e._v("ï¼‰ã€‚")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0a306784425a4200b6f9cbdbf09762af~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?",alt:"image.png"}})]),e._v(" "),n("ol",[n("li",[e._v("é€šè¿‡"),n("code",[e._v("callee")]),e._v("ä¸­åŒ…å«çš„ä¿¡æ¯æ¥åˆ¤æ–­æ˜¯å¦ç¬¦åˆæˆ‘ä»¬è¦å¤„ç†çš„ä½ç½®ï¼›")]),e._v(" "),n("li",[e._v("è¯»å–"),n("code",[e._v("loc/start/line")]),e._v(" å±æ€§å¯ä»¥å¾—åˆ°å½“å‰è°ƒç”¨è¡¨è¾¾å¼æ‰€åœ¨è¡Œå·ï¼›")]),e._v(" "),n("li",[e._v("é€šè¿‡å‘"),n("code",[e._v("arguments")]),e._v("æ•°ç»„çš„ç¬¬ä¸€ä½æ’å…¥è¡Œå·æ¥å®Œæˆç›®æ ‡ï¼›")])]),e._v(" "),n("h3",{attrs:{id:"_3-4-ç¼–å†™æ’ä»¶éƒ¨åˆ†"}},[e._v("3.4 ç¼–å†™æ’ä»¶éƒ¨åˆ†ï¼š")]),e._v(" "),n("h4",{attrs:{id:"_3-4-1-å·²æä¾›çš„æ¨¡æ¿"}},[e._v("3.4.1 å·²æä¾›çš„æ¨¡æ¿ï¼š")]),e._v(" "),n("p",[e._v("åœ¨è¿™ä¸ªæ’ä»¶æ¨¡æ¿ä¸­æˆ‘ä»¬å°†éœ€è¦è¢«å…³æ³¨çš„è¡¨è¾¾å¼æ·»åŠ åˆ°"),n("strong",[e._v("visitor")]),e._v("å¯¹è±¡ä¸­ï¼Œå½“éå†åˆ° AST ä¸ºæˆ‘ä»¬å…³æ³¨çš„è¡¨è¾¾å¼æ—¶å°†ä¼šè¢«æ‰§è¡Œï¼Œåœ¨ "),n("code",[e._v("t")]),e._v("ä¸­è¿˜åŒ…å«äº†å¾ˆå¤šå®ç”¨çš„å·¥å…·å¾…æˆ‘ä»¬å‘æ˜~")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("export default function({types: t }) {\n  return {\n    visitor: {\n      \n    }\n  };\n}\n\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br")])]),n("h4",{attrs:{id:"_3-4-2-åˆ¤æ–­æ˜¯å¦è¾¾åˆ°å¤„ç†çš„è¡¨è¾¾å¼"}},[e._v("3.4.2 åˆ¤æ–­æ˜¯å¦è¾¾åˆ°å¤„ç†çš„è¡¨è¾¾å¼ï¼š")]),e._v(" "),n("ol",[n("li",[e._v("åˆ¤æ–­"),n("code",[e._v("callee")]),e._v("çš„ç±»å‹æ˜¯å¦ç¬¦åˆ"),n("code",[e._v("MemberExpression")]),e._v("ï¼›")]),e._v(" "),n("li",[e._v("åˆ¤æ–­"),n("code",[e._v("path.node.callee.object.name")]),e._v("æ˜¯å¦ä¸º"),n("code",[e._v("console")]),e._v("ï¼›")]),e._v(" "),n("li",[e._v("åˆ¤æ–­"),n("code",[e._v("path.node.callee.property.name")]),e._v("æ˜¯å¦åŒ…å«"),n("code",[e._v("'log', 'info', 'error', 'debug'")]),e._v("ï¼›")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("CallExpression(path) {\n  if (t.isMemberExpression(path.node.callee)\n      && path.node.callee.object.name === 'console'\n      && ['log', 'info', 'error', 'debug'].includes(path.node.callee.property.name)\n     ) {\n    ã€‚ã€‚ã€‚\n  }\n}\n\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br")])]),n("h4",{attrs:{id:"_3-4-3-æ’å…¥ä»£ç è¡Œå·"}},[e._v("3.4.3 æ’å…¥ä»£ç è¡Œå·ï¼š")]),e._v(" "),n("p",[e._v("ä½¿ç”¨"),n("code",[e._v("t.stringLiteral(`line ${line}`)")]),e._v("æ¥å®ç° AST å¯¹è±¡æ’å…¥~")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const { line } = path.node.loc.start;\npath.node.arguments.unshift(t.stringLiteral(`line ${line}`))\n\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("h3",{attrs:{id:"_3-5-å®Œå–„ä¸€å¤„é…ç½®å’Œä¸€å¤„æ›´æ”¹"}},[e._v("3.5 å®Œå–„ä¸€å¤„é…ç½®å’Œä¸€å¤„æ›´æ”¹ï¼š")]),e._v(" "),n("h4",{attrs:{id:"_3-5-1-å®Œå–„é…ç½®"}},[e._v("3.5.1 å®Œå–„é…ç½®ï¼š")]),e._v(" "),n("p",[e._v("åœ¨å¾…å¤„ç†çš„æºç ä¸­æ¶‰åŠåˆ°äº† jsx è¯­æ³•çš„å¤„ç†ï¼Œè¿™é‡Œéœ€è¦ç‰¹æ®Šé…ç½®æ‰èƒ½æ”¯æŒï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨æ’ä»¶çš„æ—¶å€™ä¹Ÿå°±æ˜¯æµ‹è¯•ç”¨ä¾‹çš„ babel é…ç½®ä¸­å¤„ç†å°±å¯ä»¥~")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('{\n  "plugins": [\n    ["../../../src"]\n  ],\n  // è¡¥å……æ”¯æŒ jsx\n  "parserOpts": {\n    "plugins": [\n      "jsx"\n    ]\n  }\n}\n\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br")])]),n("h4",{attrs:{id:"_3-5-2-å®Œå–„æ›´æ”¹"}},[e._v("3.5.2 å®Œå–„æ›´æ”¹ï¼š")]),e._v(" "),n("p",[e._v("åœ¨"),n("code",[e._v("transformFileSync")]),e._v("æ‰§è¡Œåä¼šæœ‰ä¸€äº›ä»£ç é£æ ¼çš„å·®å¼‚ä¼šå½±å“åˆ°æµ‹è¯•ç”¨ä¾‹çš„ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥"),n("strong",[e._v("replace")]),e._v("æ‰è¿™äº›ç©ºç™½å­—ç¬¦~")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('expect(actual.trim().replace(/\\s/g,"")).toEqual(expected.trim().replace(/\\s/g,""));\n\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br")])]),n("h3",{attrs:{id:"_3-6-æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹"}},[e._v("3.6 æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼š")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0c6bb74b301e4c4886cd7e7082c5f7d2~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?",alt:"image.png"}})]),e._v(" "),n("h2",{attrs:{id:"_4-å‡çº§ä¼˜åŒ–æ’ä»¶"}},[e._v("4. å‡çº§ä¼˜åŒ–æ’ä»¶ï¼š")]),e._v(" "),n("hr"),e._v(" "),n("h3",{attrs:{id:"_4-1-ä½¿ç”¨-babel-generatoræ¥å°†-ast-è½¬ä¸º-code"}},[e._v("4.1 ä½¿ç”¨@babel/generatoræ¥å°† AST è½¬ä¸º Codeï¼š")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('const generate = require("@babel/generator").default;\n\nexport default function ({ types: t }) {\n  return {\n    visitor: {\n      CallExpression(path) {\n        const calleeName = generate(path.node.callee).code;\n        consolg.log(calleeName);\n      }\n    }\n  };\n}\n\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br")])]),n("h3",{attrs:{id:"_4-2-éå†targetcalleenameæ¥ä¼˜åŒ–åˆ¤æ–­é€»è¾‘"}},[e._v("4.2 éå†targetCalleeNameæ¥ä¼˜åŒ–åˆ¤æ–­é€»è¾‘ï¼š")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const generate = require(\"@babel/generator\").default;\nconst targetCalleeName = ['log', 'info', 'error', 'debug'].map(item => `console.${item}`);\n\nexport default function ({ types: t }) {\n  return {\n    visitor: {\n      CallExpression(path) {\n        const calleeName = generate(path.node.callee).code;\n        if (targetCalleeName.includes(calleeName)) {\n            const { line } = path.node.loc.start;\n            path.node.arguments.unshift(t.stringLiteral(`line ${line}`))\n        }\n      }\n    }\n  };\n}\n\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br")])]),n("h2",{attrs:{id:"_5-å‡çº§babel-plugin-x"}},[e._v("5. å‡çº§babel-plugin-xï¼š")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("ç›®å‰æœ€è¿‘çš„Babelæ’ä»¶ç‰ˆæœ¬ï¼ˆv7+ï¼‰éƒ½é‡‡ç”¨Tsç¼–å†™ï¼Œå¹¶ä¸”é£æ ¼ç•¥æœ‰ä¸åŒï¼Œåœ¨Tsä¸­ä½¿ç”¨typesç›¸å…³çš„APIä¹Ÿæ›´åŠ å®¹æ˜“ä¸Šæ‰‹ï¼Œæ‰€ä»¥æ›´æ–°åçš„Cliå°†æ”¯æŒè¿™ä¸€é£æ ¼çš„ç¼–å†™~")]),e._v(" "),n("h2",{attrs:{id:"_6-æ€»ç»“"}},[e._v("6. æ€»ç»“")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("é€šè¿‡ä½¿ç”¨ "),n("code",[e._v("yo babel-plugin-x")]),e._v(" ç”Ÿæˆçš„æ’ä»¶æ¨¡ç‰ˆæ¥å¿«é€Ÿä¸Šæ‰‹äº†ç¬¬ä¸€ä¸ª babelæ’ä»¶ï¼Œå½“ä½ æ„Ÿå—åˆ°äº† babel çš„ä½œç”¨åå†å»äº†è§£æ¯ä¸ªæ¨¡å—çš„ä½œç”¨ï¼Œå†å»æ‹†è§£æ¯ä¸€å—çš„åŠŸèƒ½ä¹Ÿå¯èƒ½ä¼šæ›´å¥½~")]),e._v(" "),n("p",[n("code",[e._v("babel-plugin")]),e._v(" æº "),n("code",[e._v("Cli")]),e._v(" æ’ä»¶å·²ç»å¤šå¹´ä¸ç»´æŠ¤äº†ï¼Œæœ‰ä¸ª BUG çš„ PR ä¸€ç›´æ²¡æœ‰åˆå¹¶å¯¼è‡´æ²¡æ³•ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘æ¨äº†ä¸€ä¸ª "),n("code",[e._v("babel-plugin-x")]),e._v("æ¥ä½¿ç”¨~")]),e._v(" "),n("hr"),e._v(" "),n("p",[n("strong",[e._v("å¦‚æœçœ‹å®Œè§‰å¾—æœ‰æ”¶è·ï¼Œæ¬¢è¿ç‚¹èµã€è¯„è®ºã€åˆ†äº«æ”¯æŒä¸€ä¸‹ã€‚ä½ çš„æ”¯æŒå’Œè‚¯å®šï¼Œæ˜¯æˆ‘åšæŒå†™ä½œçš„åŠ¨åŠ›~")])]),e._v(" "),n("p",[e._v("æœ€åå¯ä»¥å…³æ³¨æˆ‘@å°é‘«åŒå­¦ã€‚æ¬¢è¿"),n("a",{attrs:{href:"https://juejin.cn/pin/7126196941574111262",title:"https://juejin.cn/pin/7126196941574111262",target:"_blank",rel:"noopener noreferrer"}},[e._v("ç‚¹æ­¤æ‰«ç åŠ æˆ‘å¾®ä¿¡"),n("OutboundLink")],1),n("a",{attrs:{href:"https://juejin.cn/pin/7126196941574111262",title:"https://juejin.cn/pin/7126196941574111262",target:"_blank",rel:"noopener noreferrer"}},[e._v("fe-xiaoxin"),n("OutboundLink")],1),e._v("äº¤æµï¼Œå…±åŒè¿›æ­¥ï¼ˆè¿˜å¯ä»¥å¸®ä½ "),n("strong",[e._v("fix")]),e._v("ğŸ›ï¼‰~")])])}),[],!1,null,null,null);n.default=a.exports}}]);